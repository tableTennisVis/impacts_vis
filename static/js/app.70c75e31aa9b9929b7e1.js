webpackJsonp([1],{"5ghp":function(t,i){},"5xLA":function(t,i){},D4uH:function(t,i,a){"use strict";var r={},e={name:"icon",props:{name:{type:String,validator:function(t){return t?t in r||(console.warn('Invalid prop: prop "name" is referring to an unregistered icon "'+t+'".\nPlease make sure you have imported this icon before using it.'),!1):(console.warn('Invalid prop: prop "name" is required.'),!1)}},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:function(t){return"horizontal"===t||"vertical"===t}},label:String},data:function(){return{x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale:function(){var t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass:function(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse}},icon:function(){return this.name?r[this.name]:null},box:function(){return this.icon?"0 0 "+this.icon.width+" "+this.icon.height:"0 0 "+this.width+" "+this.height},ratio:function(){if(!this.icon)return 1;var t=this.icon,i=t.width,a=t.height;return Math.max(i,a)/16},width:function(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height:function(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style:function(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw:function(){if(!this.icon||!this.icon.raw)return null;var t=this.icon.raw,i={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,function(t,a,r){var e="fa-"+(o++).toString(16);return i[r]=e,' id="'+e+'"'}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,function(t,a,r,e){var o=a||e;return o&&i[o]?"#"+i[o]:t}),t}},mounted:function(){var t=this;if(!this.icon){this.$children.forEach(function(i){i.outerScale=t.normalizedScale});var i=0,a=0;this.$children.forEach(function(t){i=Math.max(i,t.width),a=Math.max(a,t.height)}),this.childrenWidth=i,this.childrenHeight=a,this.$children.forEach(function(t){t.x=(i-t.width)/2,t.y=(a-t.height)/2})}},register:function(t){for(var i in t){var a=t[i];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),r[i]=a}},icons:r},o=870711;var s={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(i,r){return a("path",t._b({key:"path-"+r},"path",i,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(i,r){return a("polygon",t._b({key:"polygon-"+r},"polygon",i,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[a("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var l=a("VU/8")(e,s,!1,function(t){a("Rc2B")},null,null);i.a=l.exports},NHnr:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=a("7+uW"),e=a("RiDx"),o={name:"Players",props:["playerWinDis"],data:function(){return{start:0,chooseName:null,serveBtn:{btn1:!0,btn2:!1},genderSelectBtn:{btn1:!0,btn2:!1},genderSelected:0,genderOptions:[{text:"Male",value:0},{text:"Female",value:1}],typeSelected:0,typeOptions:[{text:"One",value:0},{text:"Two",value:1}],fileListAll:[{filename:"DingN.(RSh)",shownameEn:"Ding N. (RSh)",type:0,gender:1,choose:!0},{filename:"FengT.W.(RSh)",shownameEn:"Feng T.W. (RSh)",type:0,gender:1,choose:!1},{filename:"FukuharaA.(LSh)",shownameEn:"Fukuhara A. (LSh)",type:0,gender:1,choose:!1},{filename:"FukuharaA.(RSh)",shownameEn:"Fukuhara A. (RSh)",type:0,gender:1,choose:!1},{filename:"GuoYan(RSh)",shownameEn:"Guo Yan (RSh)",type:0,gender:1,choose:!1},{filename:"GuoYue(RSh)",shownameEn:"Guo Yue (RSh)",type:0,gender:1,choose:!1},{filename:"LiJ.W.(LSh)",shownameEn:"Li J.W. (LSh)",type:0,gender:1,choose:!1},{filename:"LiJ.W.(RSh)",shownameEn:"Li J.W. (RSh)",type:0,gender:1,choose:!1},{filename:"LiuS.W.(RSh)",shownameEn:"Liu S.W. (RSh)",type:0,gender:1,choose:!1},{filename:"LiX.X.(RSh)",shownameEn:"Li X.X. (RSh)",type:0,gender:1,choose:!1},{filename:"MaLin(LSh)",shownameEn:"Ma Lin (LSh)",type:0,gender:0,choose:!1},{filename:"MaLin(RSh)",shownameEn:"Ma Lin (RSh)",type:0,gender:0,choose:!1},{filename:"MaLong(LSh)",shownameEn:"Ma Long (LSh)",type:0,gender:0,choose:!1},{filename:"MaLong(RSh)",shownameEn:"Ma Long (RSh)",type:0,gender:0,choose:!1},{filename:"MizutaniJ.(RSh)",shownameEn:"Mizutani J. (RSh)",type:0,gender:0,choose:!1},{filename:"OhS.E.(RPh)",shownameEn:"Oh S.E. (RPh)",type:0,gender:0,choose:!1},{filename:"RyuS.M.(RSh)",shownameEn:"Ryu S.M. (RSh)",type:0,gender:0,choose:!1},{filename:"TieY.N.(LSh)",shownameEn:"Tie Y.N. (LSh)",type:0,gender:1,choose:!1},{filename:"TieY.N.(RSh)",shownameEn:"Tie Y.N. (RSh)",type:0,gender:1,choose:!1},{filename:"T.Boll(RPh)",shownameEn:"T. Boll (RPh)",type:0,gender:0,choose:!1},{filename:"T.Boll(RSh)",shownameEn:"T. Boll (RSh)",type:0,gender:0,choose:!1},{filename:"V.Samsonov(RSh)",shownameEn:"V. Samsonov (RSh)",type:0,gender:0,choose:!1},{filename:"WangH(LSh)",shownameEn:"Wang H. (LSh)",type:0,gender:0,choose:!1},{filename:"WangH(RSh)",shownameEn:"Wang H. (RSh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(LSh)",shownameEn:"Wang L.Q. (LSh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(RPh)",shownameEn:"Wang L.Q. (RPh)",type:0,gender:0,choose:!1},{filename:"WangL.Q.(RSh)",shownameEn:"Wang L.Q. (RSh)",type:0,gender:0,choose:!1},{filename:"WangN.(RSh)",shownameEn:"Wang N. (RSh)",type:0,gender:1,choose:!1},{filename:"ZhangJ.K.(LSh)",shownameEn:"Zhang J.K. (LSh)",type:0,gender:0,choose:!1},{filename:"ZhangJ.K.(RSh)",shownameEn:"Zhang J.K. (RSh)",type:0,gender:0,choose:!1},{filename:"ZhangY.N.(RSh)",shownameEn:"Zhang Y.N. (RSh)",type:0,gender:1,choose:!1}],draw:{width:0,height:0,padding:4,playerHeight:50},players:[]}},mounted:function(){this.onResize(),this.fileListChoose=this.playerMaleOne},computed:{genderIndent:function(){return this.genderSelected?"12px":"20px"},buttonWidth:function(){return.26*this.draw.width},buttonHeight:function(){return this.buttonWidth/5},lineWidth:function(){return this.draw.width-2*this.draw.padding-this.buttonWidth-70},pathStep:function(){return this.start?this.lineWidth/290:this.lineWidth/488},fileListChoose:function(){var t=this.genderSelected,i=[];return t?t&&this.fileListAll.forEach(function(t,a){t.gender&&!t.type&&i.push(t)}):this.fileListAll.forEach(function(t,a){t.gender||t.type||i.push(t)}),i}},watch:{fileListChoose:function(){if(this.playerWinDis){var t=this.findMaxWinDis(this.fileListChoose);this.drawPlayerList(this.fileListChoose,t)}},playerWinDis:function(){if(this.playerWinDis){var t=this.findMaxWinDis(this.fileListChoose);this.drawPlayerList(this.fileListChoose,t)}}},methods:{findMaxWinDis:function(t){var i=this,a=[];return t.forEach(function(t,r){var e=i.playerWinDis[t.filename].map(function(t){return t?Math.abs(t):0});a=a.concat(e)}),e.d(a)},mouseoverPlayer:function(t){t.isHover=!0},mouseleavePlayer:function(t){t.isHover=!1},clickPlayer:function(t,i){this.players.forEach(function(t,a){t.isSelected=a===i});var a=this.fileListChoose[i];this.$emit("chooseFile",[a.filename,a.shownameEn])},drawPlayerList:function(t,i){var a=this;a.draw.height=t.length*a.draw.playerHeight+2*a.draw.padding,a.players=[];var r=0;t.forEach(function(t,o){var s=t.filename,l=t.shownameEn,h=a.playerWinDis[s],n=e.c().curve(e.b.alpha(.5)),c=e.l().domain([0,i]).range([0,a.draw.playerHeight/2]),d=[],p=[],u=!1,g=!1;console.log(h.length),h.forEach(function(t,i){if(!(a.start&&i<198)&&i%2==0){var r=a.start?i-198:i;if(t){var e=t<0;u&&e!==g&&(p.push([(r-1)*a.pathStep,0]),d.push({path:n(p),points:p,isNeg:g}),(p=[]).push([(r-1)*a.pathStep,0]));var o=c(Math.abs(t)),s=e?o:-o;p.push([r*a.pathStep,s]),u=!0,g=e}else u&&(p.push([r*a.pathStep,0]),u=!1,d.push({path:n(p),points:p,isNeg:g})),(p=[]).push([r*a.pathStep,0])}}),d.push({path:n(p),points:p,isNeg:g}),a.players.push({name:s,nameEn:l,buttonX:0,buttonY:r+(a.draw.playerHeight-a.buttonHeight)/2,centralY:r+a.draw.playerHeight/2,winDisPaths:d,isHover:!1,isSelected:!1}),r+=a.draw.playerHeight})},chooseFile:function(t,i){var a=this;this.fileList.forEach(function(i,r){t===i.filename?(i.choose=!0,a.chooseName=i.filename):i.choose=!1}),this.$emit("chooseFile",[t,i,this.chooseName])},setStart:function(t){this.start=t,0===t?(this.serveBtn.btn1=!0,this.serveBtn.btn2=!1):1===t&&(this.serveBtn.btn1=!1,this.serveBtn.btn2=!0),this.$emit("setStart",t)},setGender:function(t){this.genderSelected=t,0===t?(this.genderSelectBtn.btn1=!0,this.genderSelectBtn.btn2=!1):1===t&&(this.genderSelectBtn.btn1=!1,this.genderSelectBtn.btn2=!0)},onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight-30}}},s={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"players-view"}},[a("div",{attrs:{id:"button-container"}},[a("div",{staticClass:"btn-group",attrs:{id:"switchServeButton"}},[a("button",{staticClass:"btn switchBtn",class:{choose:t.serveBtn.btn1},attrs:{type:"button"},on:{click:function(i){t.setStart(0)}}},[t._v("serve")]),t._v(" "),a("button",{staticClass:"btn switchBtn",class:{choose:t.serveBtn.btn2},attrs:{type:"button"},on:{click:function(i){t.setStart(1)}}},[t._v("receive")])]),t._v(" "),a("div",{staticClass:"btn-group",attrs:{id:"fileListSelect"}},[a("button",{staticClass:"btn switchBtn",class:{choose:t.genderSelectBtn.btn1},attrs:{type:"button"},on:{click:function(i){t.setGender(0)}}},[t._v("Male")]),t._v(" "),a("button",{staticClass:"btn switchBtn",class:{choose:t.genderSelectBtn.btn2},attrs:{type:"button"},on:{click:function(i){t.setGender(1)}}},[t._v("Female")])])]),t._v(" "),a("div",{attrs:{id:"svg-container"}},[a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},t._l(t.players,function(i,r){return a("g",{key:"player"+r,staticClass:"player",attrs:{transform:"translate(20, 0)"}},[a("rect",{staticClass:"player-button",class:{hover:i.isHover,selected:i.isSelected},attrs:{x:i.buttonX,y:i.buttonY,width:t.buttonWidth,height:t.buttonHeight,rx:"5",ry:"5"},on:{mouseover:function(a){t.mouseoverPlayer(i)},mouseleave:function(a){t.mouseleavePlayer(i)},click:function(a){t.clickPlayer(i,r)}}}),t._v(" "),a("text",{staticClass:"player-name",class:{hover:i.isHover,selected:i.isSelected},attrs:{x:i.buttonX+t.buttonWidth/2,y:i.centralY}},[t._v("\n            "+t._s(i.nameEn)+"\n          ")]),t._v(" "),a("g",{staticClass:"player-polygonal",attrs:{transform:"translate("+(t.buttonWidth+30)+", "+(i.buttonY+t.buttonHeight/2)+")"}},[a("line",{staticClass:"base",attrs:{x1:0,y1:0,x2:t.lineWidth,y2:0}}),t._v(" "),t._l(i.winDisPaths,function(t,i){return a("path",{key:i,staticClass:"windis",class:{neg:t.isNeg},attrs:{d:t.path}})})],2)])}))])])])},staticRenderFns:[]};var l=a("VU/8")(o,s,!1,function(t){a("Qzgt")},null,null).exports,h=a("lHA8"),n=a.n(h),c=a("Zrlr"),d=a.n(c),p=a("wxAW"),u=a.n(p),g={StrikeTechLabel:{0:"serve",1:"loop",2:"flick",3:"chop",4:"drop",5:"block"},BallPositionLabel:{"-1":"null",1:"short_forehand",2:"short_middle",3:"short_backhand",4:"half_forehand",5:"half_middle",6:"half_backhand",7:"long_forehand",8:"long_middle",9:"long_backhand"},StrikePositionLabel:{"-1":"null",0:"serve",1:"forehand",2:"backhand",3:"sideways",4:"anti-sideways"},WinLabel:{"-1":"",0:"player0 win",1:"player1 win"},MatrixLabel:{0:"loop_L/F",1:"loop_L/M",2:"loop_L/B",3:"flick_L/F",4:"flick_L/M",5:"flick_L/B",6:"chop_L/F",7:"chop_L/M",8:"chop_L/B",9:"drop_S/F",10:"drop_S/M",11:"drop_S/B",12:"drop_H/F",13:"drop_H/M",14:"drop_H/B",15:"block_L/F",16:"block_L/M",17:"block_L/B"},ServeMatrixLabel:{0:"serve_S/F",1:"serve_S/M",2:"serve_S/B",3:"serve_H/F",4:"serve_H/M",5:"serve_H/B",6:"serve_L/F",7:"serve_L/M",8:"serve_L/B"},WinMatrixLabel:{0:"serve_S/F",1:"serve_S/M",2:"serve_S/B",3:"serve_H/F",4:"serve_H/M",5:"serve_H/B",6:"serve_L/F",7:"serve_L/M",8:"serve_L/B",9:"loop_L/F",10:"loop_L/M",11:"loop_L/B",12:"flick_L/F",13:"flick_L/M",14:"flick_L/B",15:"chop_L/F",16:"chop_L/M",17:"chop_L/B",18:"drop_S/F",19:"drop_S/M",20:"drop_S/B",21:"drop_H/F",22:"drop_H/M",23:"drop_H/B",24:"block_L/F",25:"block_L/M",26:"block_L/B"}},x=a("WwPU"),f=a.n(x),w=function(){function t(){d()(this,t),this.countMatrix=k(488)}return u()(t,[{key:"accumCountMatrix",value:function(t,i){t%2==i%2&&console.error(t+"_"+i),this.countMatrix[t][i]++}},{key:"calcProMatrix",value:function(){var t=this;this.keepRow=[],this.countMatrix.forEach(function(i,a){var r=0;i.forEach(function(t){r+=t}),0!==r&&t.keepRow.push(a)});for(var i=!1,a=function(){i=!0;var a=[];t.keepRow.forEach(function(r){var e=0;t.keepRow.forEach(function(i){e+=t.countMatrix[r][i]}),0!==e?a.push(r):i=!1}),t.keepRow=a};!i;)a();this.keepRow.push(486),this.keepRow.push(487),this.dim=this.keepRow.length,this.countMatrixNoZero=[];var r=[];this.keepRow.forEach(function(i){var a=[],e=0;t.keepRow.forEach(function(r){e+=t.countMatrix[i][r],a.push(t.countMatrix[i][r])}),r.push(e),t.countMatrixNoZero.push(a)}),this.proMatrix=k(this.dim),this.countMatrixNoZero.forEach(function(i,a){i.forEach(function(i,e){a>=t.countMatrixNoZero.length-2?t.proMatrix[a][e]=a===e?1:0:0!==r[a]&&(t.proMatrix[a][e]=i/r[a])})})}}]),t}(),m=function(){function t(i,a){d()(this,t),this.player=i.player,this.stroke1=i,this.stroke2=a,this.id=-1;var r=this._calcID(i,a);r>-1&&(this.id=2*r+this.player)}return u()(t,[{key:"_calcID",value:function(t,i){if(-1===t.ballPos||-1===i.ballPos)return-1;if(0===t.strikeTech&&1===i.strikeTech)return t.ballPos>=4&&i.ballPos>=7?3*(t.ballPos-4)+(i.ballPos-7):-1;if(0===t.strikeTech&&3===i.strikeTech)return i.ballPos>=7?18+3*(t.ballPos-1)+(i.ballPos-7):-1;if(0===t.strikeTech&&2===i.strikeTech)return t.ballPos<7&&i.ballPos>=7?45+3*(t.ballPos-1)+(i.ballPos-7):-1;if(0===t.strikeTech&&4===i.strikeTech)return t.ballPos<7&&i.ballPos<7?63+6*(t.ballPos-1)+(i.ballPos-1):-1;if(1===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?99+3*(t.ballPos-7)+(i.ballPos-7):-1;if(1===t.strikeTech&&5===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?108+3*(t.ballPos-7)+(i.ballPos-7):-1;if(2===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?117+3*(t.ballPos-7)+(i.ballPos-7):-1;if(2===t.strikeTech&&5===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?126+3*(t.ballPos-7)+(i.ballPos-7):-1;if(3===t.strikeTech&&1===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?135+3*(t.ballPos-7)+(i.ballPos-7):-1;if(3===t.strikeTech&&3===i.strikeTech)return t.ballPos>=7&&i.ballPos>=7?144+3*(t.ballPos-7)+(i.ballPos-7):-1;if(4===t.strikeTech&&1===i.strikeTech)return t.ballPos>=4&&t.ballPos<7&&i.ballPos>=7?153+3*(t.ballPos-4)+(i.ballPos-7):-1;if(4===t.strikeTech&&2===i.strikeTech){if(t.ballPos<7&&i.ballPos>=7)return 162+3*(t.ballPos-1)+(i.ballPos-7)}else if(4===t.strikeTech&&3===i.strikeTech){if(t.ballPos<7&&i.ballPos>=7)return 180+3*(t.ballPos-1)+(i.ballPos-7)}else if(4===t.strikeTech&&4===i.strikeTech){if(t.ballPos<7&&i.ballPos<7)return 198+6*(t.ballPos-1)+(i.ballPos-1)}else{if(5!==t.strikeTech||1!==i.strikeTech)return-1;if(t.ballPos>=7&&i.ballPos>=7)return 234+3*(t.ballPos-7)+(i.ballPos-7)}}}]),t}(),v=function(){function t(i){d()(this,t),this.id=i,this.player=i%2?1:0,this.stroke1={},this.stroke2={},this._splitState(i)}return u()(t,[{key:"_splitState",value:function(t){var i=parseInt(t/2);i>=0&&i<18?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt(i/3)+4,this.stroke2.ballPos=i%3+7):i>=18&&i<45?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-18)/3)+1,this.stroke2.ballPos=(i-18)%3+7):i>=45&&i<63?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=2,this.stroke1.ballPos=parseInt((i-45)/3)+1,this.stroke2.ballPos=(i-45)%3+7):i>=63&&i<99?(this.stroke1.strikeTech=0,this.stroke2.strikeTech=4,this.stroke1.ballPos=parseInt((i-63)/6)+1,this.stroke2.ballPos=(i-63)%6+1):i>=99&&i<108?(this.stroke1.strikeTech=1,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-99)/3)+7,this.stroke2.ballPos=(i-99)%3+7):i>=108&&i<117?(this.stroke1.strikeTech=1,this.stroke2.strikeTech=5,this.stroke1.ballPos=parseInt((i-108)/3)+7,this.stroke2.ballPos=(i-108)%3+7):i>=117&&i<126?(this.stroke1.strikeTech=2,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-117)/3)+7,this.stroke2.ballPos=(i-117)%3+7):i>=126&&i<135?(this.stroke1.strikeTech=2,this.stroke2.strikeTech=5,this.stroke1.ballPos=parseInt((i-126)/3)+7,this.stroke2.ballPos=(i-126)%3+7):i>=135&&i<144?(this.stroke1.strikeTech=3,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-135)/3)+7,this.stroke2.ballPos=(i-135)%3+7):i>=144&&i<153?(this.stroke1.strikeTech=3,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-144)/3)+7,this.stroke2.ballPos=(i-144)%3+7):i>=153&&i<162?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-153)/3)+4,this.stroke2.ballPos=(i-135)%3+7):i>=162&&i<180?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=2,this.stroke1.ballPos=parseInt((i-162)/3)+1,this.stroke2.ballPos=(i-162)%3+7):i>=180&&i<198?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=3,this.stroke1.ballPos=parseInt((i-180)/3)+1,this.stroke2.ballPos=(i-180)%3+7):i>=198&&i<234?(this.stroke1.strikeTech=4,this.stroke2.strikeTech=4,this.stroke1.ballPos=parseInt((i-198)/6)+1,this.stroke2.ballPos=(i-198)%6+1):i>=234&&i<243&&(this.stroke1.strikeTech=5,this.stroke2.strikeTech=1,this.stroke1.ballPos=parseInt((i-234)/3)+7,this.stroke2.ballPos=(i-234)%3+7)}},{key:"StrikeTechName1",get:function(){return g.StrikeTechLabel[this.stroke1.strikeTech]}},{key:"StrikeTechName2",get:function(){return g.StrikeTechLabel[this.stroke2.strikeTech]}},{key:"BallPositionName1",get:function(){return g.BallPositionLabel[this.stroke1.ballPos]}},{key:"BallPositionName2",get:function(){return g.BallPositionLabel[this.stroke2.ballPos]}}]),t}(),b=function(){function t(i,a){d()(this,t),this.dim=a.length,this.stateArray=a,this.proArray=i}return u()(t,[{key:"calcNextMarkovState",value:function(i){return new t(f.a.dot(this.proArray,i.proMatrix),this.stateArray)}},{key:"calcNextWinState",value:function(i){var a=[],r=[];return this.proArray.forEach(function(t,e){a.push(t*i.proMatrix[e][i.dim-2]),r.push(t*i.proMatrix[e][i.dim-1])}),[new t(a,this.stateArray),new t(r,this.stateArray)]}},{key:"shiftPro",value:function(i,a,r,e){var o=this,s=a[i];if(i%2!=1){var l=this.stateArray[s],h=this.proArray[s],n=l.stroke1,c=[],d=[];this.stateArray.forEach(function(t,i){0===t.player&&t.stroke1.strikeTech===n.strikeTech&&t.stroke1.ballPos===n.ballPos&&(c.push(t),d.push(o.proArray[i]))});var p=S(d),u=h/p;if(1===u||0===p)return this;var g=this.proArray.slice(),x=(u+(r+4*e*u*(1-u)))*p,f=x-h;x>1&&(x=1,f=1-h),f>p-h&&(f=p-h);for(var w=0;w<c.length;w++){var m=c[w];if(m.id===i)g[s]=x;else{var v=f*(this.proArray[a[m.id]]/(p-h));g[a[m.id]]-=v}}return new t(g,this.stateArray)}console.error("id wrong in shiftPro")}},{key:"shiftProGroup",value:function(i,a,r,e){var o=this,s=a[i];if(i%2!=1){var l=this.stateArray[s].stroke1,h=[],n=[],c=[],d=[];this.stateArray.forEach(function(t,i){0===t.player&&t.stroke1.strikeTech===l.strikeTech&&t.stroke1.ballPos===l.ballPos&&i<o.dim-2?(h.push(t),n.push(o.proArray[i])):0===t.player&&i<o.dim-2&&(c.push(t),d.push(o.proArray[i]))});var p=this.proArray.slice(),u=S(n),g=S(d),x=u+g,f=u/x;if(0===u||0===g||0===x)return this;var w=(f+(r+4*e*f*(1-f)))*x,m=w-u;return w>1&&(w=1,m=1-u),m>g&&(m=g),h.forEach(function(t){p[a[t.id]]+=m*(o.proArray[a[t.id]]/u)}),c.forEach(function(t){p[a[t.id]]-=m*(o.proArray[a[t.id]]/g)}),new t(p,this.stateArray)}console.error("id wrong in shiftProGroup")}}]),t}(),y=function(){function t(){d()(this,t),this.matrix=function(t){for(var i=[],a=0;a<t;a++){i.push([]);for(var r=0;r<t;r++)i[a][r]={winPro:0,stateID:-1}}return i}(27),this.group=function(t){for(var i=[],a=0;a<t;a++)i[a]={winPro:0,stateID:-1};return i}(27)}return u()(t,[{key:"setWinState",value:function(t,i){var a=new v(i),r=this._calcMatrixIndex(a.stroke1),e=this._calcMatrixIndex(a.stroke2);this.matrix[r][e]={winPro:t,stateID:i}}},{key:"setWinStateGroup",value:function(t,i,a){this.group[i]={winPro:t,stateID:a}}},{key:"judgeHasShift",value:function(t,i){var a=new v(t),r=this._calcMatrixIndex(a.stroke1);return i.has(r)?-1:r}},{key:"getMatrixLabel",value:function(t){return g.WinMatrixLabel[t]}},{key:"_calcMatrixIndex",value:function(t){return 0===t.strikeTech?3*t.strikeTech+(t.ballPos-1):t.strikeTech<4?9+3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+18:t.ballPos-7+24}}]),t}(),_=function(){function t(i,a,r,e,o){d()(this,t);var s=i.stateArray,l=i.proArray,h=null,n=null;a&&(h=a.proArray,n=r.proArray),this.stateMatrix=L(18,18);for(var c=e;c<486;c+=2){var p=o[c];if(void 0!==p){var u=s[p],g=u.stroke1,x=u.stroke2,f=this._calcMatrixIndex(g),w=this._calcMatrixIndex(x);-1!==f&&-1!==w&&(this.stateMatrix[f][w].Ori=l[p],h?(this.stateMatrix[f][w].Shift=h[p],this.stateMatrix[f][w].Dis=h[p]-l[p],this.stateMatrix[f][w].DisAccum=n[p]-l[p],this.stateMatrix[f][w].DisNow=h[p]-n[p]):(this.stateMatrix[f][w].Shift=0,this.stateMatrix[f][w].Dis=0,this.stateMatrix[f][w].DisAccum=0,this.stateMatrix[f][w].DisNow=0))}}this._calcRowColSum()}return u()(t,[{key:"_calcRowColSum",value:function(){var t=R(18),i=R(18);this.stateMatrix.forEach(function(a,r){var e=0,o=0,s=0,l=0,h=0;a.forEach(function(t,a){e+=t.Ori,o+=t.Shift,s+=t.Dis,l+=t.DisAccum,h+=t.DisNow,i[a].Ori+=t.Ori,i[a].Shift+=t.Shift,i[a].Dis+=t.Dis,i[a].DisAccum+=t.DisAccum,i[a].DisNow+=t.DisNow}),t[r].Ori=e,t[r].Shift=o,t[r].Dis=s,t[r].DisAccum=l,t[r].DisNow=h}),this.rowSum=t,this.colSum=i}},{key:"getMatrixLabel",value:function(t){return g.MatrixLabel[t]}},{key:"_calcMatrixIndex",value:function(t){return 0===t.strikeTech?-1:t.strikeTech<4?3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+9:t.ballPos-7+15}}]),t}(),M=function(){function t(i,a,r,e,o){d()(this,t);var s=i.stateArray,l=i.proArray,h=void 0,n=null;a&&(h=a.proArray,n=r.proArray),this.stateMatrix=L(9,18);for(var c=e;c<486;c+=2){var p=o[c];if(void 0!==p){var u=s[p],g=u.stroke1,x=u.stroke2,f=this._calcMatrixIndexR(g),w=this._calcMatrixIndexL(x);-1!==f&&-1!==w&&(this.stateMatrix[f][w].Ori=l[p],h?(this.stateMatrix[f][w].Shift=h[p],this.stateMatrix[f][w].Dis=h[p]-l[p],this.stateMatrix[f][w].DisAccum=n[p]-l[p],this.stateMatrix[f][w].DisNow=h[p]-n[p]):(this.stateMatrix[f][w].Shift=0,this.stateMatrix[f][w].Dis=0,this.stateMatrix[f][w].DisAccum=0,this.stateMatrix[f][w].DisNow=0))}}this._calcRowColSum()}return u()(t,[{key:"getMatrixLabelR",value:function(t){return g.ServeMatrixLabel[t]}},{key:"getMatrixLabelL",value:function(t){return g.MatrixLabel[t]}},{key:"_calcRowColSum",value:function(){var t=R(9),i=R(18);this.stateMatrix.forEach(function(a,r){var e=0,o=0,s=0,l=0,h=0;a.forEach(function(t,a){e+=t.Ori,o+=t.Shift,s+=t.Dis,l+=t.DisAccum,h+=t.DisNow,i[a].Ori+=t.Ori,i[a].Shift+=t.Shift,i[a].Dis+=t.Dis,i[a].DisAccum+=t.DisAccum,i[a].DisNow+=t.DisNow}),t[r].Ori=e,t[r].Shift=o,t[r].Dis=s,t[r].DisAccum=l,t[r].DisNow=h}),this.rowSum=t,this.colSum=i}},{key:"_calcMatrixIndexR",value:function(t){return 0===t.strikeTech?t.ballPos-1:-1}},{key:"_calcMatrixIndexL",value:function(t){return 0===t.strikeTech?-1:t.strikeTech<4?3*(t.strikeTech-1)+(t.ballPos-7):4===t.strikeTech?t.ballPos-1+9:t.ballPos-7+15}}]),t}();function k(t){for(var i=[],a=0;a<t;a++){i.push([]);for(var r=0;r<t;r++)i[a][r]=0}return i}function S(t){var i=0;return t.forEach(function(t){i+=t}),i}function L(t,i){for(var a=[],r=0;r<t;r++){a.push([]);for(var e=0;e<i;e++)a[r][e]={Ori:0,Shift:0,Dis:0,DisAccum:0,DisNow:0}}return a}function R(t){for(var i=[],a=0;a<t;a++)i.push({Ori:0,Shift:0,Dis:0,DisAccum:0,DisNow:0});return i}var D={name:"WinDisMatrix",props:["transMatrix","playerSet","state0Prop","endState","dim","stateArray","StateID_index","Index_StateID","K","B","start","playerWinDis","chooseName"],data:function(){return{btn1:!0,btn2:!1,selectNow:{stroke1:{strikeTech:null,ballPos:null},stroke2:{strikeTech:null,ballPos:null}},player:0,quantileUpRect:.9,quantileUpBar:.5,thresholdRect:null,thresholdBar:null,winShiftMatrix:new y,winDisMatrix:new y,winDisMatrixTest:new y,draw:{width:0,height:0,padding:4,gap:2,split:8,labelArea:60},matrix:{matrixHeightReal:null,matrixWidthReal:null,transformY:null,transformX:null,rectSize:null,row:null,col:null,rowEnd:null,colEnd:null,rects:null,rowBar:null},label:{row:{},col:{},childLabelWidth:30,labelHeight:16},tooltip:{width:100,height:40,matrix:{x:null,y:null,dif:null,show:!1},matrixRight:{x:null,y:null,dif:null,show:!1},matrixBottom:{x:null,y:null,dif:null,show:!1},bar:{x:null,y:null,dif:null,show:!1},barRight:{x:null,y:null,dif:null,show:!1}}}},mounted:function(){this.onResize()},computed:{winRate0:function(){if(this.playerWinDis)return this.endState?this.endState.proArray[this.dim-2]:void 0},matrixAreaWidth:function(){return this.draw.width-this.draw.labelArea-2*this.draw.padding},matrixAreaHeight:function(){return this.draw.height-1*this.draw.labelArea-2*this.draw.padding}},watch:{winRate0:function(){this.winShiftMatrix=new y,this.winDisMatrix=new y,this.calcDisWinRate(),this.drawDisWin()},K:function(){this.winShiftMatrix=new y,this.winDisMatrix=new y,this.calcDisWinRate(),this.drawDisWin()},start:function(){this.winShiftMatrix=new y,this.winDisMatrix=new y,this.calcDisWinRate(),this.drawDisWin()}},methods:{onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight},drawDisWin:function(){var t=this,i=[],a=[];t.winDisMatrix.matrix.forEach(function(t,a){t.forEach(function(t,a){t.winPro&&0!==t.winPro&&i.push(Math.abs(t.winPro))})}),t.winDisMatrix.group.forEach(function(t,i){t.winPro&&0!==t.winPro&&a.push(Math.abs(t.winPro))}),t.thresholdRect=e.h(i,t.quantileUpRect),t.thresholdBar=e.h(a,t.quantileUpBar);var r={row:new n.a,col:new n.a},o={row:new n.a,col:new n.a};t.winDisMatrix.matrix.forEach(function(i,a){i.forEach(function(i,e){0!==i.winPro&&Math.abs(i.winPro)>t.thresholdRect&&(r.row.add(a),r.col.add(e),o.row.add(t.childMapParent(a)),o.col.add(t.childMapParent(e)))})}),t.winDisMatrix.group.forEach(function(i,a){0!==i.winPro&&Math.abs(i.winPro)>t.thresholdBar&&r.row.add(a)});var s=o.row.size,l=o.col.size,h=Math.round((t.matrixAreaWidth-t.draw.split*s)/r.row.size),c=Math.round((t.matrixAreaHeight-t.draw.split*l)/r.col.size);t.matrix.rectSize=Math.min(h,c);var d=t.matrix.rectSize,p=0,u=0,g=0,x=0;t.matrix.row=[],t.matrix.col=[],t.matrix.rowEnd=[],t.matrix.colEnd=[],t.matrix.rects=[],t.matrix.rowBar=[];for(var f=0;f<t.winDisMatrix.matrix.length;f++)t.matrix.row.push(p),t.matrix.col.push(u),r.row.has(f)&&(g=p+d,p+=d),r.col.has(f)&&(x=u+d,u+=d),8!==f&&11!==f&&14!==f&&17!==f&&23!==f||(o.row.has(t.childMapParent(f))&&(p+=t.draw.split),o.col.has(t.childMapParent(f))&&(u+=t.draw.split)),t.matrix.rowEnd.push(g),t.matrix.colEnd.push(x);t.matrix.matrixHeightReal=u,t.matrix.matrixWidthReal=p,t.matrix.transformY=t.draw.height-t.draw.padding-t.matrix.matrixHeightReal,t.matrix.transformX=(t.draw.width-t.draw.padding-t.matrix.matrixWidthReal-t.draw.labelArea)/2;var w=e.l().domain([e.e(i),e.d(i)]).range([4,d-4]),m=e.l().domain([e.e(i),e.d(i)]).range([2,d/2-2]);t.winDisMatrix.matrix.forEach(function(i,a){var e=[];i.forEach(function(i,o){var s=i.winPro;r.row.has(a)&&r.col.has(o)?e.push({stateID:i.stateID,id:27*a+o,x:t.matrix.row[a],y:t.matrix.col[o],indexr:a,indexl:o,value:100*s,width:d,height:d,cx:t.matrix.row[a]+d/2,cy:t.matrix.col[o]+d/2,r:0===s?0:m(Math.abs(s)),widthDis:0===s?0:w(Math.abs(s)),isNeg:s<0,isHighlight:!1,selected:!1}):e.push({stateID:i.stateID,id:27*a+o,x:t.matrix.row[a],y:t.matrix.col[o],indexr:a,indexl:o,value:0,width:0,height:0,cx:t.matrix.row[a],cy:t.matrix.col[o],r:0,widthDis:0,isNeg:!1,isHighlight:!1,selected:!1})}),t.matrix.rects.push(e)});var v=e.k().domain([0,e.d(a)]).range([1,t.draw.labelArea]);t.winDisMatrix.group.forEach(function(i,a){var e=i.winPro;if(r.row.has(a)){var o=v(Math.abs(e));t.matrix.rowBar.push({stateID:i.stateID,x:t.matrix.row[a]+1,y:-o,indexr:a,value:100*e,width:t.matrix.rectSize-2,height:o,isNeg:e<0,isHighlight:!1,selected:!1})}else t.matrix.rowBar.push({stateID:i.stateID,x:t.matrix.row[a],y:0,indexr:a,value:0,width:t.matrix.rectSize-2,height:0,isNeg:!1,isHighlight:!1,selected:!1})}),t.label.row.childLine=[],t.label.row.childLabel=[];for(var b=t.label.row.childLine,y=t.label.row.childLabel,_=0;_<t.matrix.row.length;_++){var M=t.winDisMatrix.getMatrixLabel(_).split("_");r.row.has(_)?(y.push({x:t.matrix.row[_]+t.matrix.rectSize/2,show:!0,childLabel:M[1],parentLabel:M[0],isHighlight:!1}),b.push({x:t.matrix.row[_]+t.matrix.rectSize/2,show:!0,isHighlight:!1})):(y.push({x:t.matrix.row[_],show:!1,childLabel:M[1],parentLabel:M[0],isHighlight:!1}),b.push({x:t.matrix.row[_],show:!1,isHighlight:!1}))}t.label.col.childLine=[],t.label.col.childLabel=[];for(var k=t.label.col.childLine,S=t.label.col.childLabel,L=0;L<t.matrix.col.length;L++){var R=t.winDisMatrix.getMatrixLabel(L).split("_");r.col.has(L)?(S.push({y:t.matrix.col[L]+t.matrix.rectSize/2,show:!0,childLabel:R[1],parentLabel:R[0],isHighlight:!1}),k.push({y:t.matrix.col[L]+t.matrix.rectSize/2,show:!0,isHighlight:!1})):(S.push({y:t.matrix.col[L],show:!1,childLabel:R[1],parentLabel:R[0],isHighlight:!1}),k.push({y:t.matrix.col[L],show:!1,isHighlight:!1}))}t.label.row.parentLabel=[];var D=t.label.row.parentLabel,P={},W="";y.forEach(function(i,a){if(i.parentLabel!==W)P.text&&D.push(P),P={x1:t.matrix.row[a],x2:t.matrix.rowEnd[a],text:i.parentLabel,type:t.matrix.rowEnd[a]-t.matrix.row[a]>t.draw.gap?1:0,isHighlight:!1},W=i.parentLabel;else{P.x2=t.matrix.rowEnd[a];var e=P.x2-P.x1;r.row.has(a)&&(P.type=1,e>1.5*d&&(P.type=2))}}),D.push(P),t.label.col.parentLabel=[];var A=t.label.col.parentLabel,C={},B="";S.forEach(function(i,a){if(i.parentLabel!==B)C.text&&A.push(C),C={y1:t.matrix.col[a],y2:t.matrix.colEnd[a],text:i.parentLabel,type:t.matrix.colEnd[a]-t.matrix.col[a]>t.draw.gap?1:0,isHighlight:!1},B=i.parentLabel;else{C.y2=t.matrix.colEnd[a];var e=C.y2-C.y1;r.col.has(a)&&(C.type=1,e>1.5*d&&(C.type=2))}}),A.push(C)},showTooltipMatrix:function(t){var i=this,a=t.x+t.width/2,r=t.y-1-8-i.tooltip.height;a-i.tooltip.width/2<0?(i.tooltip.matrixRight.x=t.x+t.width+1,i.tooltip.matrixRight.y=t.y+t.height/2,i.tooltip.matrixRight.dif=t.value.toFixed(2),i.tooltip.matrixRight.show=!0):r<0?(i.tooltip.matrixBottom.x=a,i.tooltip.matrixBottom.y=t.y+t.height+1,i.tooltip.matrixBottom.dif=t.value.toFixed(2),i.tooltip.matrixBottom.show=!0):(i.tooltip.matrix.x=a,i.tooltip.matrix.y=t.y-1,i.tooltip.matrix.dif=t.value.toFixed(2),i.tooltip.matrix.show=!0)},hideTooltipMatrix:function(){this.tooltip.matrix.show=!1,this.tooltip.matrixBottom.show=!1,this.tooltip.matrixRight.show=!1},showTooltipBar:function(t){var i=this,a=t.x+t.width/2;a-i.tooltip.width/2<0?(i.tooltip.barRight.x=t.x+t.width+1,i.tooltip.barRight.y=t.y+t.height/2,i.tooltip.barRight.dif=t.value.toFixed(2),i.tooltip.barRight.show=!0):(i.tooltip.bar.x=a,i.tooltip.bar.y=t.y-1,i.tooltip.bar.dif=t.value.toFixed(2),i.tooltip.bar.show=!0)},hideTooltipBar:function(){this.tooltip.bar.show=!1,this.tooltip.barRight.show=!1},setShift:function(t,i,a){if(console.log("stateID: "+t),-1!==t){var r=new v(t);this.selectNow.stroke1.strikeTech=r.StrikeTechName1,this.selectNow.stroke1.ballPos=r.BallPositionName1,"single"===i?(this.selectNow.stroke2.strikeTech=r.StrikeTechName2,this.selectNow.stroke2.ballPos=r.BallPositionName2):(this.selectNow.stroke2.strikeTech=null,this.selectNow.stroke2.ballPos=null),this.matrix.rects.forEach(function(t){t.forEach(function(t){t.selected=!1})}),this.matrix.rowBar.forEach(function(t){t.selected=!1}),a.selected=!0,this.$emit("setShift",[t,i])}},mouseoverMatrixRect:function(t,i,a){t.value&&(this.showTooltipMatrix(t),this.highlightMatrix(i,a))},mouseleaveMatrixRect:function(t){this.hideTooltipMatrix(t),this.recoverAll()},mouseoverParLabelRow:function(t,i){t.type&&this.highlightParentRow(i)},mouseoverParLabelCol:function(t,i){t.type&&this.highlightParentCol(i)},mouseoverBar:function(t,i){var a=this.childMapParent(i);this.showTooltipBar(t),this.highlightLine(this.label.row.childLabel,i),this.highlightLine(this.label.row.parentLabel,a)},mouseleaveBar:function(t){this.hideTooltipBar(t),this.recoverAll()},highlightParentRow:function(t){var i=this,a=i.parentMapChild(t);i.highlightLine(i.label.row.parentLabel,t),i.highlightLines(i.label.row.childLabel,a),i.highlightLines(i.label.row.childLine,a),i.highlightMatrixRows(i.matrix.rects,a)},highlightParentCol:function(t){var i=this,a=i.parentMapChild(t);i.highlightLine(i.label.col.parentLabel,t),i.highlightLines(i.label.col.childLabel,a),i.highlightLines(i.label.col.childLine,a),i.highlightMatrixCols(i.matrix.rects,a)},highlightChildRow:function(t){var i=this,a=i.childMapParent(t);i.highlightLine(i.label.row.parentLabel,a),i.highlightLine(i.label.row.childLabel,t),i.highlightLine(i.label.row.childLine,t),i.highlightMatrixRow(i.matrix.rects,t)},highlightChildCol:function(t){var i=this,a=i.childMapParent(t);i.highlightLine(i.label.col.parentLabel,a),i.highlightLine(i.label.col.childLabel,t),i.highlightLine(i.label.col.childLine,t),i.highlightMatrixCol(i.matrix.rects,t)},highlightMatrix:function(t,i){var a=this,r=a.childMapParent(t),e=a.childMapParent(i);a.highlightLine(a.label.row.parentLabel,r),a.highlightLine(a.label.col.parentLabel,e),a.highlightLine(a.label.row.childLabel,t),a.highlightLine(a.label.col.childLabel,i),a.highlightLine(a.label.row.childLine,t),a.highlightLine(a.label.col.childLine,i),a.highlightMatrixSingle(a.matrix.rects,t,i)},childMapParent:function(t){return t<9?0:t<12?1:t<15?2:t<18?3:t<24?4:5},parentMapChild:function(t){switch(t){case 0:return[0,1,2,3,4,5,6,7,8];case 1:return[9,10,11];case 2:return[12,13,14];case 3:return[15,16,17];case 4:return[18,19,20,21,22,23];case 5:return[24,25,26]}},highlightLine:function(t,i){t&&t.length&&t.forEach(function(t,a){t.isHighlight=a===i})},highlightLines:function(t,i){t&&t.length&&t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})},highlightMatrixRow:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,r){t.isHighlight=a===i})})},highlightMatrixRows:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,r){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixCol:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){t.isHighlight=a===i})})},highlightMatrixCols:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixSingle:function(t,i,a){t&&t.length&&t.forEach(function(t,r){t.forEach(function(t,e){t.isHighlight=r===i||e===a})})},recoverLine:function(t){t&&t.length&&t.forEach(function(t){t.isHighlight=!1})},recoverMatrix:function(t){t&&t.length&&t.forEach(function(t){t.forEach(function(t){t.isHighlight=!1})})},recoverAll:function(){var t=this;t.recoverLine(t.label.row.parentLabel),t.recoverLine(t.label.col.parentLabel),t.recoverLine(t.label.row.childLabel),t.recoverLine(t.label.col.childLabel),t.recoverLine(t.label.row.childLine),t.recoverLine(t.label.col.childLine),t.recoverMatrix(t.matrix.rects)},calcShiftWinRate:function(t){console.log("start: "+t);var i=this;i.state0Prop.forEach(function(a,r){var e=i.Index_StateID[r];if(e%2===i.player){if(e<198)if(t)i.winShiftMatrix.setWinState(i.winRate0,e);else{var o=1,s=new b(i.state0Prop,i.stateArray).shiftPro(e,i.StateID_index,i.K,i.B),l=void 0;do{s=(l=s).calcNextMarkovState(i.transMatrix),o++}while((Math.abs(l.proArray[i.dim-2]-s.proArray[i.dim-2])>1e-5||Math.abs(l.proArray[i.dim-1]-s.proArray[i.dim-1])>1e-5||0===l.proArray[i.dim-1]||0===l.proArray[i.dim-2])&&o<35);i.winShiftMatrix.setWinState(s.proArray[i.dim-1-!i.player],e)}if(e<486&&e>=198){var h=1,n=new b(i.state0Prop,i.stateArray),c=void 0;do{n=(c=n).calcNextMarkovState(i.transMatrix),h%2===t&&(n=n.shiftPro(e,i.StateID_index,i.K,i.B)),h++}while((Math.abs(c.proArray[i.dim-2]-n.proArray[i.dim-2])>1e-5||Math.abs(c.proArray[i.dim-1]-n.proArray[i.dim-1])>1e-5||0===c.proArray[i.dim-1]||0===c.proArray[i.dim-2])&&h<35);i.winShiftMatrix.setWinState(n.proArray[i.dim-1-!i.player],e)}}})},calcShiftWinRateGroup:function(t){var i=this,a=new n.a;i.state0Prop.forEach(function(r,e){var o=i.Index_StateID[e],s=i.winShiftMatrix.judgeHasShift(o,a);if(s>-1&&o%2===i.player){if(o<198)if(t)i.winShiftMatrix.setWinStateGroup(i.winRate0,s,o),a.add(s);else{var l=1,h=new b(i.state0Prop,i.stateArray).shiftProGroup(o,i.StateID_index,i.K,i.B),n=void 0;do{h=(n=h).calcNextMarkovState(i.transMatrix),l++}while((Math.abs(n.proArray[i.dim-2]-h.proArray[i.dim-2])>1e-5||Math.abs(n.proArray[i.dim-1]-h.proArray[i.dim-1])>1e-5||0===n.proArray[i.dim-1]||0===n.proArray[i.dim-2])&&l<35);i.winShiftMatrix.setWinStateGroup(h.proArray[i.dim-1-!i.player],s,o),a.add(s)}if(o<486&&o>=198){var c=1,d=new b(i.state0Prop,i.stateArray),p=void 0;do{d=(p=d).calcNextMarkovState(i.transMatrix),c%2===t&&(d=d.shiftProGroup(o,i.StateID_index,i.K,i.B)),c++}while((Math.abs(p.proArray[i.dim-2]-d.proArray[i.dim-2])>1e-5||Math.abs(p.proArray[i.dim-1]-d.proArray[i.dim-1])>1e-5||0===p.proArray[i.dim-1]||0===p.proArray[i.dim-2])&&c<35);i.winShiftMatrix.setWinStateGroup(d.proArray[i.dim-1-!i.player],s,o),a.add(s)}}})},calcDisWinRate:function(){var t=this;t.playerWinDis[t.chooseName].forEach(function(i,a){a<486&&i&&t.winDisMatrix.setWinState(i,a)})}}},P={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"windismatrix-view"}},[a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},[t.matrix.transformY>0?a("g",{attrs:{transform:"translate("+t.matrix.transformX+", "+t.matrix.transformY+")"}},[a("g",{staticClass:"matrix",attrs:{id:"winDisMatrix"}},[a("g",{staticClass:"label-area",attrs:{id:"rowLabel-child"}},[t._l(t.label.row.childLine,function(i,r){return i.show?a("line",{key:"line"+r,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:i.x,x2:i.x,y1:0,y2:-50}}):t._e()}),t._v(" "),t._l(t.label.row.childLabel,function(i,r){return i.show?a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){t.highlightChildRow(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:i.x-t.label.labelHeight/2,y:-5-t.label.childLabelWidth,width:t.label.labelHeight,height:t.label.childLabelWidth}}),t._v(" "),a("text",{staticClass:"child",attrs:{transform:"translate("+i.x+", "+(-5-t.label.childLabelWidth/2)+") rotate(90)",x:0,y:0}},[t._v(t._s(i.childLabel))])]):t._e()})],2),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"rowLabel-parent"}},t._l(t.label.row.parentLabel,function(i,r){return a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverParLabelRow(i,r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:i.x1+1,y:5-t.draw.labelArea,width:i.x2-i.x1-2,height:t.label.labelHeight}}),t._v(" "),2===i.type?a("text",{staticClass:"parent",attrs:{x:(i.x1+i.x2)/2,y:5-t.draw.labelArea+t.label.labelHeight/2}},[t._v(t._s(i.text))]):1===i.type?a("text",{staticClass:"parent",attrs:{x:(i.x1+i.x2)/2,y:5-t.draw.labelArea+t.label.labelHeight/2}},[t._v(t._s(i.text.slice(0,3)))]):t._e()])})),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"colLabel-child",transform:"translate("+t.matrix.matrixWidthReal+", 0)"}},[t._l(t.label.col.childLine,function(i,r){return i.show?a("line",{key:"line"+r,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:0,x2:50,y1:i.y,y2:i.y}}):t._e()}),t._v(" "),t._l(t.label.col.childLabel,function(i,r){return i.show?a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){t.highlightChildCol(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:5,y:i.y-t.label.labelHeight/2,width:t.label.childLabelWidth,height:t.label.labelHeight}}),t._v(" "),a("text",{staticClass:"child",attrs:{x:5+t.label.childLabelWidth/2,y:i.y}},[t._v(t._s(i.childLabel))])]):t._e()})],2),t._v(" "),a("g",{staticClass:"label-area",attrs:{id:"colLabel-parent",transform:"translate("+t.matrix.matrixWidthReal+", 0)"}},t._l(t.label.col.parentLabel,function(i,r){return a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverParLabelCol(i,r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{rx:"5",ry:"5",x:t.draw.labelArea-t.label.labelHeight-5,y:i.y1+1,width:t.label.labelHeight,height:i.y2-i.y1-2}}),t._v(" "),2===i.type?a("text",{staticClass:"parent",attrs:{transform:"translate("+(t.draw.labelArea-t.label.labelHeight/2-5)+", "+(i.y1+i.y2)/2+") rotate(90)"}},[t._v(t._s(i.text))]):1===i.type?a("text",{staticClass:"parent",attrs:{transform:"translate("+(t.draw.labelArea-t.label.labelHeight/2-5)+", "+(i.y1+i.y2)/2+") rotate(90)"}},[t._v(t._s(i.text.slice(0,3)))]):t._e()])})),t._v(" "),t._l(t.matrix.rects,function(i,r){return a("g",{key:"row"+r,staticClass:"row"},[t._l(i,function(i,e){return a("rect",{key:"back"+e,staticClass:"back",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:i.width,height:i.height},on:{click:function(a){t.setShift(i.stateID,"single",i)},mouseover:function(a){t.mouseoverMatrixRect(i,r,e)},mouseleave:function(a){t.mouseleaveMatrixRect(i)}}})}),t._v(" "),t._l(i,function(t){return a("rect",{key:"winDis"+t.id,staticClass:"winDis",class:{neg:t.isNeg},attrs:{x:t.x+t.width/2-t.widthDis/2,y:t.y+t.width/2-t.widthDis/2,width:t.widthDis,height:t.widthDis}})})],2)}),t._v(" "),t._l(t.matrix.rects,function(i,r){return a("g",{key:"front"+r,staticClass:"row"},[a("g",{staticClass:"front"},t._l(i,function(t,i){return a("rect",{key:"front"+i,class:{selected:t.selected},attrs:{x:t.x,y:t.y,width:t.width,height:t.height}})}))])}),t._v(" "),t.tooltip.matrix.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix",transform:"translate("+t.tooltip.matrix.x+", "+t.tooltip.matrix.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height-8+25}},[t._v("\n              Diff: "+t._s(t.tooltip.matrix.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixBottom.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom",transform:"translate("+t.tooltip.matrixBottom.x+", "+t.tooltip.matrixBottom.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:33}},[t._v("\n              Diff: "+t._s(t.tooltip.matrixBottom.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixRight.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-right",transform:"translate("+t.tooltip.matrixRight.x+", "+t.tooltip.matrixRight.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:"8",y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+25}},[t._v("\n              Diff: "+t._s(t.tooltip.matrixRight.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M 10 -5 L 10 5 L 0 0 z"}})]):t._e()],2)]):t._e()])])])},staticRenderFns:[]};var W=a("VU/8")(D,P,!1,function(t){a("rx7f")},null,null).exports,A={name:"MatrixOverview",props:["StateID_index","Index_StateID","transMatrix","dim","allMarkovStateOri","allMarkovStateShift","allMarkovStateShiftAccum","start","strokeFrom"],data:function(){return{player:0,btn1:!0,btn2:!1,allMarkovStateShiftAccumReal:[],winRateOri:{accum:[],add:[]},winRateShiftDis:{accum:[],add:[]},winDisBarRects:null,winRateShift:{accum:[],add:[]},winRateShiftDisPienow:{add:[]},textWindow:{ori:null,shiftDis:null},height:null,draw:{padding:4,lineArea:50,paddingLeft:20,paddingInner:60,stateRects:[],accumWinRate:[],addWinRate:[]},tooltip:{add:{width:180,height:60,ori:null,dif:null,pieAccum:null,pieNow:null,isNeg:!1,x:null,y:null,show:!1},accum:{width:120,height:60,ori:null,dif:null,isNeg:!1,x:null,y:null,show:!1}}}},watch:{allMarkovStateShift:function(){this.allMarkovStateShift.length>0?(this.calcWinRateOri(this.start),this.calcAllMarkovStateShiftAccumReal(this.start),this.calcWinRateShiftDis(this.start),this.calcWinDisBarRects(this.start),this.drawOverviewRect(this.start),this.drawAccumWinRate(),this.drawAddWinRate()):(this.resetWinRateShiftDis(),this.drawOverviewRect(this.start),this.drawAccumWinRate(),this.drawAddWinRate())},strokeFrom:function(){var t=this;this.draw.stateRects.forEach(function(i,a){i.strokeFrom===t.strokeFrom?i.isSelected=!0:i.isSelected=!1})}},mounted:function(){this.onResize()},computed:{width:function(){return(this.rectWidth+this.draw.paddingInner)*this.winRateOri.accum.length},rectHeight:function(){return(this.height-this.paddingTop)/2},rectWidth:function(){return 1.7*this.rectHeight},lineArea:function(){return.25*this.height},paddingTop:function(){return.08*this.height}},methods:{mouseoverAddStream:function(t){this.textWindow.ori=t.ori,this.textWindow.shiftDis=t.dis;var i=e.g().startAngle(-Math.PI/4).sort(null),a=e.a().innerRadius(0).outerRadius(25),r=i([Math.abs(t.disNow),Math.abs(t.disAccum)]);this.tooltip.add.x=t.centralX+5,this.tooltip.add.y=t.centralY,this.tooltip.add.ori=t.ori.toFixed(2),this.tooltip.add.dif=t.dis.toFixed(2),this.tooltip.add.pieAccum=a(r[1]),this.tooltip.add.pieNow=a(r[0]),this.tooltip.add.isNeg=t.disNeg,this.tooltip.add.show=!0},mouseleaveAddStream:function(){this.hideText(),this.tooltip.add.show=!1},mouseoverAccumStream:function(t){this.textWindow.ori=t.ori,this.textWindow.shiftDis=t.dis,this.tooltip.accum.x=(t.x1+t.x2)/2,this.tooltip.accum.y=12,this.tooltip.accum.ori=t.ori.toFixed(2),this.tooltip.accum.dif=t.dis.toFixed(2),this.tooltip.accum.show=!0},mouseleaveAccumStream:function(){this.hideText(),this.tooltip.accum.show=!1},hideText:function(){this.textWindow.ori=null,this.textWindow.shiftDis=null},setDetail:function(t){this.$emit("setStroke",t)},onResize:function(){this.height=this.$el.clientHeight-20},drawOverviewRect:function(t){var i=this,a=[];i.winDisBarRects.forEach(function(t,i){t.advance.forEach(function(t){a.push(t.value)}),t.reduce.forEach(function(t){a.push(t.value)})});var r=e.k().domain([0,e.d(a)]).range([0,i.rectHeight/2]),o=e.j().domain(e.i(3)).range([0,i.rectWidth/2]).paddingOuter(.5).paddingInner(.2);i.draw.stateRects=[];var s=0,l=t+1;i.winDisBarRects.forEach(function(t,a){var e={advance:[],reduce:[]};t.advance.forEach(function(t,a){var s=r(t.value);e.advance.push({x:o(a),y:i.rectHeight-s-2,width:o.bandwidth(),height:s,label:t.label.replace("_"," ")})}),t.reduce.forEach(function(t,a){var s=r(t.value);e.reduce.push({x:i.rectWidth/2+o(a),y:i.rectHeight-s-2,width:o.bandwidth(),height:s,label:t.label.replace("_"," ")})}),i.draw.stateRects.push({strokeFrom:l,x:s,x2:s+i.rectWidth,text:l+"-"+(l+2),isSelected:l===i.strokeFrom,winBars:e}),s+=i.rectWidth+i.draw.paddingInner,l+=2})},drawAccumWinRate:function(){var t=this;if(0!==t.winRateShiftDis.accum.length){var i=t.winRateShiftDis.accum.concat(t.winRateShiftDis.add.map(function(t){return Math.abs(t)})),a=e.l().domain([0,e.d(i)]).range([0,10]);t.draw.accumWinRate=[];for(var r=0,o=0;o<t.winRateShiftDis.accum.length;o++){var s=t.winRateOri.accum[o],l=t.winRateShiftDis.accum[o],h=l<0;if(0===o){var n=r+2*t.draw.paddingInner+t.rectWidth;t.draw.accumWinRate.push({ori:100*s,dis:100*l,x1:r,x2:n,strokeW:a(s),strokeWDis:a(Math.abs(l)),y:a(s)/2,yDis:a(Math.abs(l))/2,disNeg:h}),r=n}else t.draw.accumWinRate.push({ori:100*s,dis:100*l,x1:r,x2:r+t.draw.paddingInner+t.rectWidth,strokeW:a(s),strokeWDis:a(Math.abs(l)),y:a(s)/2,yDis:a(Math.abs(l))/2,disNeg:l<0}),r+=t.draw.paddingInner+t.rectWidth}}else t.draw.accumWinRate=[]},drawAddWinRate:function(){var t=this;if(0!==t.winRateShiftDis.add.length){var i=t.winRateShiftDis.accum.concat(t.winRateShiftDis.add.map(function(t){return Math.abs(t)})),a=e.l().domain([0,e.d(i)]).range([0,10]);t.draw.addWinRate=[],t.draw.stateRects.forEach(function(i,r){var o=t.winRateOri.add[r],s=t.winRateShiftDis.add[r],l=t.winRateShiftDisPienow.add[r],h=s<0,n=t.draw.accumWinRate[r+1].strokeW,c=t.draw.accumWinRate[r+1].strokeWDis,d=h?n-c:n+c,p=i.x+t.rectWidth,u=i.x+t.rectWidth+2*t.draw.paddingInner,g=a(o)/2+t.draw.lineArea,x=t.draw.lineArea,f=d+a(o)/2,w=c-a(Math.abs(s))/2,m=e.f();m.moveTo(p,g),m.lineTo(u,f),t.draw.addWinRate.push({ori:100*o,dis:100*s,disAccum:100*(s-l),disNow:100*l,strokeW:a(o),strokeWDis:a(Math.abs(s)),pathOri:m.toString(),centralX:(p+u)/2,centralY:(x+w)/2,pathShiftDis:t.genCurvePath(p,u,x,w),disNeg:h})})}else t.draw.addWinRate=[]},genCurvePath:function(t,i,a,r){var o=(3*t+i)/4,s=a,l=(t+3*i)/4,h=r,n=(t+i)/2,c=(a+r)/2,d=e.f();return d.moveTo(t,a),d.quadraticCurveTo(o,s,n,c),d.quadraticCurveTo(l,h,i,r),d.toString()},resetWinRateShiftDis:function(){this.winRateOri.accum=[],this.winRateOri.add=[],this.winRateShiftDis.accum=[],this.winRateShiftDis.add=[],this.winRateShift.accum=[],this.winRateShift.add=[],this.winDisBarRects=[]},calcWinRateOri:function(t){var i=this;if(i.winRateOri.accum=[],i.winRateOri.add=[],t){var a=i.allMarkovStateOri[1];i.winRateOri.accum.push(a.proArray[i.dim-2])}else i.winRateOri.accum.push(0);for(var r=i.winRateOri.accum[0],e=null,o=t+2;o<i.allMarkovStateOri.length;o++)if(o%2===t){var s=i.allMarkovStateOri[o];i.winRateOri.accum.push(s.proArray[i.dim-2]),e=s.proArray[i.dim-2],i.winRateOri.add.push(e-r),r=e}},calcAllMarkovStateShiftAccumReal:function(t){var i=this;i.allMarkovStateShiftAccumReal=[],t&&i.allMarkovStateShiftAccumReal.push(i.allMarkovStateShiftAccum[0]);for(var a=t+1;a<=i.allMarkovStateShiftAccum.length;a+=2){var r=a-1,e=i.allMarkovStateShiftAccum[r];if(i.allMarkovStateShiftAccumReal.push(e),a<i.allMarkovStateShiftAccum.length){var o=e.calcNextMarkovState(i.transMatrix);i.allMarkovStateShiftAccumReal.push(o)}}},calcWinRateShiftDis:function(t){var i=this;i.winRateShiftDis.accum=[],i.winRateShiftDis.add=[],i.winRateShiftDisPienow.add=[],i.winRateShift.accum=[],i.winRateShift.add=[];var a=void 0;if(t){var r=i.allMarkovStateShift[0].calcNextMarkovState(i.transMatrix).proArray[i.dim-2],e=r-i.winRateOri.accum[0];i.winRateShift.accum.push(r),i.winRateShiftDis.accum.push(e),a=r}else i.winRateShift.accum.push(0),i.winRateShiftDis.accum.push(0),a=0;for(var o=null,s=null,l=0,h=t+1;h+1<=i.allMarkovStateShift.length;h+=2){var n=i.allMarkovStateShift[h],c=i.allMarkovStateShiftAccumReal[h],d=n.calcNextMarkovState(i.transMatrix).proArray[i.dim-2];s=c.calcNextMarkovState(i.transMatrix).proArray[i.dim-2];var p=(o=d)-i.winRateOri.accum[l+1];i.winRateShift.accum.push(o),i.winRateShiftDis.accum.push(p);var u=o-a,g=o-s;i.winRateShift.add.push(u),i.winRateShiftDis.add.push(u-i.winRateOri.add[l]),i.winRateShiftDisPienow.add.push(g),a=o,l++}},calcWinDisBarRects:function(t){for(var i=this,a=[],r=function(){var t=i.calcWinDisBar(e-1),r={advance:[],reduce:[]},l=[],h=[];if(t.colSum.forEach(function(i,a){var r=i.Dis;r>0?l.push({value:Math.abs(r),label:t.getMatrixLabel(a)}):r<0&&h.push({value:Math.abs(r),label:t.getMatrixLabel(a)})}),l.sort(function(t,i){return i.value-t.value}),h.sort(function(t,i){return i.value-t.value}),l.length>=3)r.advance=l.slice(0,3);else{var n=l.length;for(r.advance=l.slice(0,n),o=n;o<3;o++)r.advance[o]={value:0,label:""}}if(h.length>=3)r.reduce=h.slice(0,3);else{var c=h.length;for(r.reduce=h.slice(0,c),s=c;s<3;s++)r.reduce[s]={value:0,label:""}}a.push(r)},e=t+1;e+2<=i.allMarkovStateShift.length;e+=2){var o,s;r()}i.winDisBarRects=a},calcWinDisBar:function(t){var i=this,a=i.allMarkovStateOri[t+1],r=i.allMarkovStateShift[t+1],e=i.allMarkovStateShiftAccum[t].calcNextMarkovState(i.transMatrix),o=a.calcNextWinState(i.transMatrix)[0],s=r.calcNextWinState(i.transMatrix)[0],l=e.calcNextWinState(i.transMatrix)[0];return new _(o,s,l,1,i.StateID_index)}}},C={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"matrixoverview-view"}},[a("div",{staticClass:"svg-container"},[a("svg",{attrs:{width:t.width,height:t.height}},[a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},[a("g",{attrs:{id:"stateRects",transform:"translate("+t.draw.paddingLeft+", "+(t.lineArea+t.paddingTop)+")"}},t._l(t.draw.stateRects,function(i,r){return a("g",{key:"stateRect"+r,attrs:{transform:"translate("+i.x+", 0)"}},[a("rect",{class:{selected:i.isSelected},attrs:{x:0,y:0,width:t.rectWidth,height:t.rectHeight},on:{click:function(a){t.setDetail(i.strokeFrom)}}}),t._v(" "),a("g",{staticClass:"winbar"},[t._l(i.winBars.advance,function(i,r){return a("g",{key:"advance"+r,staticClass:"advance",attrs:{transform:"translate(-5, 0)"}},[a("rect",{attrs:{x:i.x,y:i.y,width:i.width,height:i.height}}),t._v(" "),a("text",{attrs:{transform:"translate("+(i.x+i.width/2)+", "+i.y+") rotate(-60)",x:"0",y:"0"}},[t._v("\n                  "+t._s(i.label)+"\n                ")])])}),t._v(" "),t._l(i.winBars.reduce,function(i,r){return a("g",{key:"reduce"+r,staticClass:"reduce",attrs:{transform:"translate(-6, 0)"}},[a("rect",{attrs:{x:i.x,y:i.y,width:i.width,height:i.height}}),t._v(" "),a("text",{attrs:{transform:"translate("+(i.x+i.width/2)+", "+i.y+") rotate(-60)",x:"0",y:"0"}},[t._v("\n                  "+t._s(i.label)+"\n                ")])])})],2),t._v(" "),a("ellipse",{attrs:{cx:t.rectWidth/2,cy:t.rectHeight+t.lineArea/2-3,rx:t.rectWidth/5,ry:t.rectWidth/12}}),t._v(" "),a("text",{staticClass:"num",attrs:{x:t.rectWidth/2,y:t.rectHeight+t.lineArea/2-3}},[t._v("\n              "+t._s(i.text)+"\n            ")])])})),t._v(" "),a("g",{attrs:{id:"winRateAdd",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},t._l(t.draw.addWinRate,function(i,r){return a("g",{key:"add"+r,on:{mouseover:function(a){t.mouseoverAddStream(i)},mouseleave:t.mouseleaveAddStream}},[a("path",{staticClass:"dis",class:{neg:i.disNeg},attrs:{d:i.pathShiftDis,"stroke-width":i.strokeWDis}})])})),t._v(" "),a("g",{attrs:{id:"winRateAccum",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},t._l(t.draw.accumWinRate,function(i,r){return a("g",{key:"accum"+r,on:{mouseover:function(a){t.mouseoverAccumStream(i)},mouseleave:t.mouseleaveAccumStream}},[a("line",{staticClass:"dis",class:{neg:i.disNeg},attrs:{x1:i.x1,y1:i.yDis,x2:i.x2,y2:i.yDis,"stroke-width":i.strokeWDis}})])})),t._v(" "),a("g",{attrs:{id:"tooltip-add",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},[t.tooltip.add.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-add-right",transform:"translate("+t.tooltip.add.x+", "+t.tooltip.add.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.add.height/2,width:t.tooltip.add.width,height:t.tooltip.add.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.add.height/2+23}},[t._v("\n              Ori: "+t._s(t.tooltip.add.ori)+"%\n            ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 -30"}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.add.height/2+49}},[t._v("\n              Diff: "+t._s(t.tooltip.add.dif)+"%\n            ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.add.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.add.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.add.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-accum",transform:"translate("+t.draw.paddingLeft+", "+t.paddingTop+")"}},[t.tooltip.accum.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-accum-bottom",transform:"translate("+t.tooltip.accum.x+", "+t.tooltip.accum.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.accum.width/2,y:8,width:t.tooltip.accum.width,height:t.tooltip.accum.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.accum.width/2+10,y:31}},[t._v("\n              Ori: "+t._s(t.tooltip.accum.ori)+"%\n            ")]),t._v(" "),a("text",{attrs:{x:-t.tooltip.accum.width/2+10,y:57}},[t._v("\n              Diff: "+t._s(t.tooltip.accum.dif)+"%\n            ")]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e()])])])])])},staticRenderFns:[]};var B=a("VU/8")(A,C,!1,function(t){a("T1jv")},null,null).exports,T=a("D4uH"),N=(a("5O9v"),{name:"MatrixDetail",components:{Icon:T.a},props:["transMatrix","allMarkovStateOri","StateID_index","Index_StateID","strokeFrom","allMarkovStateShift","allMarkovStateShiftAccum","shift","K","B"],data:function(){return{textWindow:{Ori:null,Dis:null},stateMatrixArray:new Array(2),winStateArray:new Array(2),draw:{width:0,height:0,padding:4,slotWidth:60,barArea:30,gap:3},label:{labelChild:["L/F","L/M","L/B","L/F","L/M","L/B","L/F","L/M","L/B","S/F","S/M","S/B","H/F","H/M","H/B","L/F","L/M","L/B"],labelParent:["loop","flick","chop","drop","block"],labelChildServe:["S/F","S/M","S/B","H/F","H/M","H/B","L/F","L/M","L/B"],labelParentServe:["serve"]},bar:{scaleX:null,rowBars1:null,rowBar1BaseY:null,colBars1:null,colBars2:null,winBars1:null,winBars2:null,colBar1BaseY:null,colBar2BaseY:null},matrix:{circles1:null,circles2:null,winRects2:null},line:{lineHorizon1:null,lineVertical1:null,lineHorizon2:null,lineVertical2:null},winMode:{name:"win",choose:!1,path:this.drawModeSelect(10)},proMode:{name:"pro",choose:!0,path:this.drawModeSelect(10)},nowMode:"pro",tooltip:{width:180,height:60,splitLine:100,ori:null,dif:null,pieAccum:null,pieNow:null,isNeg:!1,matrixBottom1:{x:null,y:null,show:!1},matrixTop1:{x:null,y:null,show:!1},matrixRight1:{x:null,y:null,show:!1},matrixRightTop1:{x:null,y:null,show:!1},matrixRightBottom1:{x:null,y:null,show:!1},matrixTop2:{x:null,y:null,show:!1},matrixBottom2:{x:null,y:null,show:!1},barProRight0:{x:null,y:null,show:!1},barProRightBottom0:{x:null,y:null,show:!1},barWinLeft1:{x:null,y:null,show:!1},barWinLeftBottom1:{x:null,y:null,show:!1},barWinLeftTop1:{x:null,y:null,show:!1},barProRight1:{x:null,y:null,show:!1},barProRightBottom1:{x:null,y:null,show:!1},barProRightTop1:{x:null,y:null,show:!1},barWinLeft2:{x:null,y:null,show:!1},barWinLeftBottom2:{x:null,y:null,show:!1},barWinLeftTop2:{x:null,y:null,show:!1},barProLeft2:{x:null,y:null,show:!1},barProLeftBottom2:{x:null,y:null,show:!1},barProLeftTop2:{x:null,y:null,show:!1}}}},mounted:function(){this.onResize()},computed:{MatrixHeight:function(){return parseInt((this.draw.height-this.draw.slotWidth-this.draw.padding)/2)},MatrixWidth:function(){return parseInt((this.draw.width-7*this.draw.barArea-2*this.draw.padding)/2)},rectWidth:function(){return parseInt((this.MatrixHeight-4*this.draw.gap)/18)},MatrixHeightReal:function(){return 18*this.rectWidth+4*this.draw.gap},MatrixAdjust:function(){return this.MatrixHeight-this.MatrixHeightReal},barWidth:function(){return this.rectWidth-2},matrixPadding:function(){return(this.MatrixWidth-18*this.rectWidth)/17},transformXserve:function(){return 1===this.strokeFrom?9*(this.rectWidth+this.matrixPadding):0},matrixRects1:function(){return 1===this.strokeFrom?this.calcMatrixRects(9,18):this.calcMatrixRects(18,18)},matrixRects2:function(){return this.calcMatrixRectsReverse(18,18)},matrixLabelChildRow1:function(){return this.calcMatrixLabelChild(this.matrixRects1,this.strokeFrom,1)},matrixLabelChildRow2:function(){return this.calcMatrixLabelChild(this.matrixRects2,this.strokeFrom,2)},matrixLabelParentRow1:function(){return this.calcMatrixLabelParent(this.matrixRects1,this.strokeFrom,1)},matrixLabelParentRow2:function(){return this.calcMatrixLabelParent(this.matrixRects2,this.strokeFrom,2)},matrixLabelChildCol2:function(){var t=this,i=[];return t.matrixRects2.col.forEach(function(a,r){i.push({y:a,height:t.rectWidth,text:t.label.labelChild[17-r],isHighlight:!1})}),i},matrixLabelParentCol2:function(){var t=this,i=[];return i.push({y:this.matrixRects2.col[0],height:3*t.rectWidth,text:"block"}),i.push({y:this.matrixRects2.col[3],height:6*t.rectWidth,text:"drop"}),i.push({y:this.matrixRects2.col[9],height:3*t.rectWidth,text:"chop"}),i.push({y:this.matrixRects2.col[12],height:3*t.rectWidth,text:"flick"}),i.push({y:this.matrixRects2.col[15],height:3*t.rectWidth,text:"loop"}),i},matrixSymbol1:function(){return this.calcMatrixSymbol(this.matrixRects1)},matrixSymbol2:function(){return this.calcMatrixSymbol(this.matrixRects2)}},watch:{strokeFrom:function(){console.log("new StrokeFrom: "+this.strokeFrom),this.allMarkovStateShift.length>0&&(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail())},allMarkovStateOri:function(){this.allMarkovStateShift.length>0&&(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail())},allMarkovStateShift:function(){this.allMarkovStateShift.length>0?(this.calcStateMatrix(this.strokeFrom-1),this.drawMatrixDetail()):this.resetMatrixDetail()}},methods:{onResize:function(){this.draw.width=this.$el.clientWidth,this.draw.height=this.$el.clientHeight},resetMatrixDetail:function(){this.bar={scaleX:null,rowBars1:null,colBars1:null,colBars2:null,winBars1:null,winBars2:null},this.matrix={circles1:null,circles2:null},this.line={lineHorizon1:null,lineVertical1:null,lineHorizon2:null,lineVertical2:null}},drawMatrixDetail:function(){var t=this,i=t.stateMatrixArray[0].rowSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0}),a=t.stateMatrixArray[0].colSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0}),r=t.stateMatrixArray[1].colSum.map(function(t){return t.Shift?Math.abs(t.Shift-t.Ori):0});t.bar.scaleX=e.k().domain([0,e.d(i.concat(a).concat(r))]).range([2,t.draw.barArea]),t.bar.rowBars1=t.calcBarsReverse(t.stateMatrixArray[0].rowSum.slice().reverse(),t.bar.scaleX),t.bar.rowBar1BaseY=t.bar.rowBars1[t.bar.rowBars1.length-1].y+t.rectWidth,t.bar.colBars1=t.calcBars(t.stateMatrixArray[0].colSum,t.bar.scaleX),t.bar.colBars2=t.calcBarsReverse(t.stateMatrixArray[1].colSum.slice().reverse(),t.bar.scaleX),t.bar.winBars1=t.calcBars(t.winStateArray[0].colSum,t.bar.scaleX),t.bar.winBars2=t.calcBarsReverse(t.winStateArray[1].colSum.slice().reverse(),t.bar.scaleX),t.bar.colBar1BaseY=t.bar.colBars1[t.bar.colBars1.length-1].y+t.rectWidth,t.bar.colBar2BaseY=t.bar.colBars1[t.bar.colBars1.length-1].y+t.rectWidth,t.line.lineHorizon1=t.calcMatrixLineHorizon1(t.bar.rowBars1,t.matrixRects1),t.line.lineHorizon2=t.calcMatrixLineHorizon2(t.bar.colBars1,t.matrixRects2),t.line.lineVertical1=t.calcMatrixLineVertical(t.matrixRects1),t.line.lineVertical2=t.calcMatrixLineVertical(t.matrixRects2);var o=[],s=[];t.stateMatrixArray[0].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){o.push(t.Ori),o.push(t.Shift),s.push(t.Shift?Math.abs(t.Shift-t.Ori):0)})}),t.stateMatrixArray[1].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){o.push(t.Ori),o.push(t.Shift),s.push(t.Shift?Math.abs(t.Shift-t.Ori):0)})});var l=e.l().domain([0,e.d(o)]).range([0,t.rectWidth/2-1-2]),h=e.l().domain([e.e(s),e.d(s)]).range([2,t.rectWidth/2-1-2]);t.matrix.circles1=t.calcMatrixCircle(t.matrixRects1,t.stateMatrixArray[0].stateMatrix,l,h),t.matrix.circles2=t.calcMatrixCircleReverse(t.matrixRects2,t.stateMatrixArray[1].stateMatrix,l,h);var n=[];t.winStateArray[1].stateMatrix.forEach(function(t,i){t.forEach(function(t,i){t.Shift&&n.push(Math.abs(t.Shift-t.Ori))})});var c=e.l().domain([e.e(n),e.d(n)]).range([2,t.rectWidth-4]);t.matrix.winRects2=t.calcMatrixWinRectReverse(t.matrixRects2,t.winStateArray[1].stateMatrix,c)},calcMatrixRects:function(t,i){for(var a=[],r=[],e=[],o=0,s=0,l=0;l<t;l++)r.push(o),o+=this.rectWidth+this.matrixPadding;for(var h=0;h<i;h++)3!==h&&6!==h&&9!==h&&15!==h||(s+=this.draw.gap),e.push(s),s+=this.rectWidth;for(var n=0;n<t;n++){for(var c=[],d=0;d<i;d++)c.push({id:n*t+d,x:r[n],y:e[d],isHighlight:!1});a.push(c)}return{row:r,col:e,rects:a}},calcMatrixRectsReverse:function(t,i){for(var a=[],r=[],e=[],o=0,s=0,l=0;l<t;l++)r.push(o),o+=this.rectWidth+this.matrixPadding;for(var h=0;h<i;h++)3!==h&&9!==h&&12!==h&&15!==h||(s+=this.draw.gap),e.push(s),s+=this.rectWidth;for(var n=0;n<t;n++){for(var c=[],d=0;d<i;d++)c.push({id:n*t+d,x:r[n],y:e[d],isHighlight:!1});a.push(c)}return{row:r,col:e,rects:a}},calcMatrixCircle:function(t,i,a,r){var o=this,s=[],l=e.g().startAngle(-Math.PI/4).sort(null),h=e.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,e){var n=[];i.forEach(function(i,s){var c=t.rects[e][s],d=l([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);n.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:h(d[1]),arcDisNow:h(d[0]),id:c.id,rOri:0===i.Ori?0:a(i.Ori),rShift:0===i.Shift?0:a(i.Shift),rDis:0===i.Dis?0:r(Math.abs(i.Dis)),cx:c.x+o.rectWidth/2,cy:c.y+o.rectWidth/2,isNeg:i.Dis<0,isHighlight:!1})}),s.push(n)}),s},calcMatrixCircleReverse:function(t,i,a,r){var o=this,s=[],l=e.g().startAngle(-Math.PI/4).sort(null),h=e.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,e){var n=[];i.slice().reverse().forEach(function(i,s){var c=t.rects[e][s],d=l([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);n.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:h(d[1]),arcDisNow:h(d[0]),id:c.id,rOri:0===i.Ori?0:a(i.Ori),rShift:0===i.Shift?0:a(i.Shift),rDis:0===i.Dis?0:r(Math.abs(i.Dis)),cx:c.x+o.rectWidth/2,cy:c.y+o.rectWidth/2,isNeg:i.Dis<0,isHighlight:!1})}),s.push(n)}),s},calcMatrixWinRectReverse:function(t,i,a){var r=[],o=e.g().startAngle(-Math.PI/4).sort(null),s=e.a().innerRadius(0).outerRadius(25);return i.forEach(function(i,e){var l=[];i.slice().reverse().forEach(function(i,r){var h=t.rects[e][r],n=o([Math.abs(i.DisNow),Math.abs(i.DisAccum)]);l.push({proOri:i.Ori,proDis:i.Dis,proDisAccum:i.DisAccum,proDisNow:i.DisNow,arcDisAccum:s(n[1]),arcDisNow:s(n[0]),id:h.id,widthDis:0===i.Dis?0:a(Math.abs(i.Dis)),x:t.row[e],y:t.col[r],isNeg:i.Dis<0})}),r.push(l)}),r},calcBars:function(t,i){var a=this,r=[],o=1,s=e.g().startAngle(-Math.PI/4).sort(null),l=e.a().innerRadius(0).outerRadius(25);return t.forEach(function(t,e){3!==e&&6!==e&&9!==e&&15!==e||(o+=a.draw.gap);var h=s([Math.abs(t.DisNow),Math.abs(t.DisAccum)]);r.push({id:e,proOri:t.Ori,proDis:t.Dis,proDisAccum:t.DisAccum,proDisNow:t.DisNow,arcDisAccum:l(h[1]),arcDisNow:l(h[0]),widthOri:i(t.Ori),widthDis:i(Math.abs(t.Dis)),isNeg:t.Dis<0,y:o,isHighlight:!1}),o+=2+a.barWidth}),r},calcBarsReverse:function(t,i){var a=this,r=[],o=1,s=e.g().startAngle(-Math.PI/4).sort(null),l=e.a().innerRadius(0).outerRadius(25);return t.forEach(function(t,e){3!==e&&9!==e&&12!==e&&15!==e||(o+=a.draw.gap);var h=s([Math.abs(t.DisNow),Math.abs(t.DisAccum)]);r.push({id:e,proOri:t.Ori,proDis:t.Dis,proDisAccum:t.DisAccum,arcDisAccum:l(h[1]),proDisNow:t.DisNow,arcDisNow:l(h[0]),widthOri:i(t.Ori),widthDis:i(Math.abs(t.Dis)),isNeg:t.Dis<0,y:o,isHighlight:!1}),o+=2+a.barWidth}),r},calcMatrixLineHorizon1:function(t,i){var a=this,r=[],e=i.row.length;return t.forEach(function(t,o){r.push({x1:t.widthDis+3,x2:a.transformXserve+i.row[e-1-o]+a.rectWidth/2+a.draw.barArea,y:t.y+a.barWidth/2,isHighlight:!1})}),r},calcMatrixLineHorizon2:function(t,i){var a=this,r=[];return t.forEach(function(t,e){r.push({x1:t.widthDis+3,x2:i.row[e]+a.rectWidth/2+1.2*a.draw.barArea,y:t.y+a.barWidth/2,isHighlight:!1})}),r},calcMatrixLineVertical:function(t){var i=this,a=[],r=t.col.length-t.row.length;return t.row.forEach(function(t,e){a.push({x:t+i.rectWidth/2,y:i.matrixRects1.col[e+r]+i.rectWidth/2,isHighlight:!1})}),a},calcMatrixLabelChild:function(t,i,a){var r=this,e=void 0;e=1===a&&1===i?r.label.labelChildServe:r.label.labelChild;var o=[];return t.row.forEach(function(t,i){o.push({x:t-4,width:r.rectWidth+8,text:e[i],isHighlight:!1})}),o},calcMatrixLabelParent:function(t,i,a){var r=this,e=[];return 1===a&&1===i?e.push({x:t.row[0],width:9*r.rectWidth+8*r.matrixPadding,text:"serve",isHighlight:!1}):(e.push({x:t.row[0],width:3*r.rectWidth+2*r.matrixPadding,text:"loop",isHighlight:!1}),e.push({x:t.row[3],width:3*r.rectWidth+2*r.matrixPadding,text:"flick",isHighlight:!1}),e.push({x:t.row[6],width:3*r.rectWidth+2*r.matrixPadding,text:"chop",isHighlight:!1}),e.push({x:t.row[9],width:6*r.rectWidth+5*r.matrixPadding,text:"drop",isHighlight:!1}),e.push({x:t.row[15],width:3*r.rectWidth+2*r.matrixPadding,text:"block",isHighlight:!1})),e},calcMatrixSymbol:function(t){var i=this,a=[];return t.row.forEach(function(r,e){var o=void 0;o=e===t.row.length-1?"":"+",a.push({x:r+i.rectWidth+i.matrixPadding/2,y:i.MatrixHeightReal/2,text:o})}),a},drawModeSelect:function(t){var i=e.f();return i.moveTo(0,0),i.lineTo(-t/2,t),i.lineTo(t/2,t),i.closePath(),i.toString()},setMode:function(t){"win"===t?(this.winMode.choose=!0,this.proMode.choose=!1,this.nowMode="win"):(this.winMode.choose=!1,this.proMode.choose=!0,this.nowMode="pro")},mouseoverRowBars1:function(t,i,a,r){var e=this.bar.rowBars1.length;this.showPro(a,r),this.showTooltipProbar0(t,a,r),this.highlightRow1(e-1-i)},mouseleaveRowBars1:function(){this.hidePro(),this.hideTooltipProbar0(),this.recoverAll()},mouseoverWinBars1:function(t,i,a,r){this.showPro(a,r),this.showTooltipWinbar1(t,a,r),this.highlightCol1(i)},mouseleaveWinBars1:function(){this.hidePro(),this.hideTooltipWinbar1(),this.recoverAll()},mouseoverProBars1:function(t,i,a,r){this.showPro(a,r),this.showTooltipProbar1(t,a,r),this.highlightCol1(i)},mouseleaveProBars1:function(){this.hidePro(),this.hideTooltipProbar1(),this.recoverAll()},mouseoverWinBars2:function(t,i,a,r){this.showPro(a,r),this.showTooltipWinbar2(t,a,r),this.highlightCol2(i)},mouseleaveWinBars2:function(){this.hidePro(),this.hideTooltipWinbar2(),this.recoverAll()},mouseoverProBars2:function(t,i,a,r){this.showPro(a,r),this.showTooltipProbar2(t,a,r),this.highlightCol2(i)},mouseleaveProBars2:function(){this.hidePro(),this.hideTooltipProbar2(),this.recoverAll()},mouseoverMatrix1:function(t,i,a){if(this.matrix.circles1){var r=100*this.matrix.circles1[i][a].proOri,e=100*this.matrix.circles1[i][a].proDis;if(0!==e){var o=this.matrix.circles1[i][a].arcDisAccum,s=this.matrix.circles1[i][a].arcDisNow;this.showPro(r,e),this.showTooltipMatrix1(t,r,e,o,s),this.highlightMatrix1(i,a)}}},mouseleaveMatrix1:function(){this.hideTooltipMatrix1(),this.hidePro(),this.recoverAll()},mouseoverMatrix2:function(t,i,a){var r=void 0,e=void 0,o=void 0,s=void 0;if("pro"===this.nowMode){if(!this.matrix.circles2)return;r=100*this.matrix.circles2[i][a].proOri,e=100*this.matrix.circles2[i][a].proDis,o=this.matrix.circles2[i][a].arcDisAccum,s=this.matrix.circles2[i][a].arcDisNow}else{if(!this.matrix.winRects2)return;r=100*this.matrix.winRects2[i][a].proOri,e=100*this.matrix.winRects2[i][a].proDis,o=this.matrix.winRects2[i][a].arcDisAccum,s=this.matrix.winRects2[i][a].arcDisNow}0!==e&&(this.showPro(r,e),this.showTooltipMatrix2(t,r,e,o,s),this.highlightMatrix2(i,a))},mouseleaveMatrix2:function(){this.hideTooltipMatrix2(),this.hidePro(),this.recoverAll()},showPro:function(t,i){this.textWindow.Ori=t,this.textWindow.Dis=i},hidePro:function(){this.textWindow.Ori=null,this.textWindow.Dis=null},showTooltipMatrix1:function(t,i,a,r,e){var o=this;o.tooltip.ori=i.toFixed(2),o.tooltip.dif=a.toFixed(2),o.tooltip.isNeg=a<0,o.tooltip.pieAccum=r,o.tooltip.pieNow=e;var s=t.x+o.rectWidth/2-o.tooltip.width/2,l=t.y+o.rectWidth+1+o.tooltip.height+8,h=t.y+o.rectWidth/2+o.tooltip.height/2,n=t.y+o.rectWidth/2-o.tooltip.height/2;s<0&&h>o.MatrixHeight?(o.tooltip.matrixRightTop1.x=t.x+o.rectWidth+1,o.tooltip.matrixRightTop1.y=t.y+o.rectWidth/2,o.tooltip.matrixRightTop1.show=!0):s<0&&n<0?(o.tooltip.matrixRightBottom1.x=t.x+o.rectWidth+1,o.tooltip.matrixRightBottom1.y=t.y+o.rectWidth/2,o.tooltip.matrixRightBottom1.show=!0):s<0?(o.tooltip.matrixRight1.x=t.x+o.rectWidth+1,o.tooltip.matrixRight1.y=t.y+o.rectWidth/2,o.tooltip.matrixRight1.show=!0):l>o.MatrixHeight?(o.tooltip.matrixTop1.x=t.x+o.rectWidth/2,o.tooltip.matrixTop1.y=t.y-1,o.tooltip.matrixTop1.show=!0):(o.tooltip.matrixBottom1.x=t.x+o.rectWidth/2,o.tooltip.matrixBottom1.y=t.y+o.rectWidth+1,o.tooltip.matrixBottom1.show=!0)},hideTooltipMatrix1:function(){var t=this;t.tooltip.matrixRightTop1.show=!1,t.tooltip.matrixRightBottom1.show=!1,t.tooltip.matrixRight1.show=!1,t.tooltip.matrixTop1.show=!1,t.tooltip.matrixBottom1.show=!1},showTooltipMatrix2:function(t,i,a,r,e){var o=this;o.tooltip.ori=i.toFixed(2),o.tooltip.dif=a.toFixed(2),o.tooltip.isNeg=a<0,o.tooltip.pieAccum=r,o.tooltip.pieNow=e,t.y-1-8-o.tooltip.height<0?(o.tooltip.matrixBottom2.x=t.x+o.rectWidth/2,o.tooltip.matrixBottom2.y=t.y+o.rectWidth+1,o.tooltip.matrixBottom2.show=!0):(o.tooltip.matrixTop2.x=t.x+o.rectWidth/2,o.tooltip.matrixTop2.y=t.y-1,o.tooltip.matrixTop2.show=!0)},hideTooltipMatrix2:function(){this.tooltip.matrixTop2.show=!1,this.tooltip.matrixBottom2.show=!1},showTooltipProbar0:function(t,i,a){var r=this;t.x=0,r.tooltip.ori=i.toFixed(2),r.tooltip.dif=a.toFixed(2),r.tooltip.isNeg=a<0,r.tooltip.pieAccum=t.arcDisAccum,r.tooltip.pieNow=t.arcDisNow,t.y+r.barWidth/2-r.tooltip.height/2<0?(r.tooltip.barProRightBottom0.x=t.x+t.widthDis+1,r.tooltip.barProRightBottom0.y=t.y+r.barWidth/2,r.tooltip.barProRightBottom0.show=!0):(r.tooltip.barProRight0.x=t.x+t.widthDis+1,r.tooltip.barProRight0.y=t.y+r.barWidth/2,r.tooltip.barProRight0.show=!0)},hideTooltipProbar0:function(){this.tooltip.barProRight0.show=!1,this.tooltip.barProRightBottom0.show=!1},showTooltipWinbar1:function(t,i,a){var r=this;t.x=-t.widthDis,r.tooltip.ori=i.toFixed(2),r.tooltip.dif=a.toFixed(2),r.tooltip.isNeg=a<0,r.tooltip.pieAccum=t.arcDisAccum,r.tooltip.pieNow=t.arcDisNow;var e=t.y-r.tooltip.height/2,o=t.y+r.tooltip.height/2;e<0?(r.tooltip.barWinLeftBottom1.x=t.x-1,r.tooltip.barWinLeftBottom1.y=t.y+r.barWidth/2,r.tooltip.barWinLeftBottom1.show=!0):o>r.MatrixHeight?(r.tooltip.barWinLeftTop1.x=t.x-1,r.tooltip.barWinLeftTop1.y=t.y+r.barWidth/2,r.tooltip.barWinLeftTop1.show=!0):(r.tooltip.barWinLeft1.x=t.x-1,r.tooltip.barWinLeft1.y=t.y+r.barWidth/2,r.tooltip.barWinLeft1.show=!0)},hideTooltipWinbar1:function(){this.tooltip.barWinLeft1.show=!1,this.tooltip.barWinLeftTop1.show=!1,this.tooltip.barWinLeftBottom1.show=!1},showTooltipProbar1:function(t,i,a){var r=this;t.x=0,r.tooltip.ori=i.toFixed(2),r.tooltip.dif=a.toFixed(2),r.tooltip.isNeg=a<0,r.tooltip.pieAccum=t.arcDisAccum,r.tooltip.pieNow=t.arcDisNow;var e=t.y-r.tooltip.height/2,o=t.y+r.tooltip.height/2;e<0?(r.tooltip.barProRightBottom1.x=t.x+t.widthDis+1,r.tooltip.barProRightBottom1.y=t.y+r.barWidth/2,r.tooltip.barProRightBottom1.show=!0):o>r.MatrixHeight?(r.tooltip.barProRightTop1.x=t.x+t.widthDis+1,r.tooltip.barProRightTop1.y=t.y+r.barWidth/2,r.tooltip.barProRightTop1.show=!0):(r.tooltip.barProRight1.x=t.x+t.widthDis+1,r.tooltip.barProRight1.y=t.y+r.barWidth/2,r.tooltip.barProRight1.show=!0)},hideTooltipProbar1:function(){this.tooltip.barProRight1.show=!1,this.tooltip.barProRightTop1.show=!1,this.tooltip.barProRightBottom1.show=!1},showTooltipWinbar2:function(t,i,a){var r=this;t.x=-t.widthDis,r.tooltip.ori=i.toFixed(2),r.tooltip.dif=a.toFixed(2),r.tooltip.isNeg=a<0,r.tooltip.pieAccum=t.arcDisAccum,r.tooltip.pieNow=t.arcDisNow;var e=t.y-r.tooltip.height/2,o=t.y+r.tooltip.height/2;e<0?(r.tooltip.barWinLeftBottom2.x=t.x-1,r.tooltip.barWinLeftBottom2.y=t.y+r.barWidth/2,r.tooltip.barWinLeftBottom2.show=!0):o>r.MatrixHeight?(r.tooltip.barWinLeftTop2.x=t.x-1,r.tooltip.barWinLeftTop2.y=t.y+r.barWidth/2,r.tooltip.barWinLeftTop2.show=!0):(r.tooltip.barWinLeft2.x=t.x-1,r.tooltip.barWinLeft2.y=t.y+r.barWidth/2,r.tooltip.barWinLeft2.show=!0)},hideTooltipWinbar2:function(){this.tooltip.barWinLeft2.show=!1,this.tooltip.barWinLeftTop2.show=!1,this.tooltip.barWinLeftBottom2.show=!1},showTooltipProbar2:function(t,i,a){var r=this;t.x=0,r.tooltip.ori=i.toFixed(2),r.tooltip.dif=a.toFixed(2),r.tooltip.isNeg=a<0,r.tooltip.pieAccum=t.arcDisAccum,r.tooltip.pieNow=t.arcDisNow;var e=t.y-r.tooltip.height/2,o=t.y+r.tooltip.height/2;e<0?(r.tooltip.barProLeftBottom2.x=t.x-1,r.tooltip.barProLeftBottom2.y=t.y+r.barWidth/2,r.tooltip.barProLeftBottom2.show=!0):o>r.MatrixHeight?(r.tooltip.barProLeftTop2.x=t.x-1,r.tooltip.barProLeftTop2.y=t.y+r.barWidth/2,r.tooltip.barProLeftTop2.show=!0):(r.tooltip.barProLeft2.x=t.x-1,r.tooltip.barProLeft2.y=t.y+r.barWidth/2,r.tooltip.barProLeft2.show=!0)},hideTooltipProbar2:function(){this.tooltip.barProLeft2.show=!1,this.tooltip.barProLeftTop2.show=!1,this.tooltip.barProLeftBottom2.show=!1},highlightRow1:function(t){var i=this;if(i.bar.rowBars1){var a=i.bar.rowBars1.length;i.highlightLine(i.bar.rowBars1,a-1-t),i.highlightLine(i.line.lineHorizon1,a-1-t),i.highlightLine(i.line.lineVertical1,t),i.highlightLine(i.matrixLabelChildRow1,t),i.highlightLine(i.matrixLabelParentRow1,i.childMapParentRow(t,1)),i.highlightMatrixRow(i.matrixRects1.rects,t)}},highlightParentRow1:function(t){var i=this;if(i.bar.rowBars1){var a=i.bar.rowBars1.length,r=i.parentMapChildRow(t,1),e=r.map(function(t){return a-1-t});i.highlightLines(i.bar.rowBars1,e),i.highlightLines(i.line.lineHorizon1,e),i.highlightLines(i.line.lineVertical1,r),i.highlightLines(i.matrixLabelChildRow1,r),i.highlightLine(i.matrixLabelParentRow1,t),i.highlightMatrixRows(i.matrixRects1.rects,r)}},highlightCol1:function(t){var i=this;i.highlightMatrixCol(i.matrixRects1.rects,t),i.highlightMatrixRow(i.matrixRects2.rects,t),i.highlightLine(i.bar.colBars1,t),i.highlightLine(i.bar.winBars1,t),i.highlightLine(i.line.lineHorizon2,t),i.highlightLine(i.line.lineVertical2,t),i.highlightLine(i.matrixLabelChildRow2,t),i.highlightLine(i.matrixLabelParentRow2,i.childMapParentRow(t,2))},highlightParentRow2:function(t){var i=this,a=i.parentMapChildRow(t,2);i.highlightMatrixCols(i.matrixRects1.rects,a),i.highlightMatrixRows(i.matrixRects2.rects,a),i.highlightLines(i.bar.colBars1,a),i.highlightLines(i.bar.winBars1,a),i.highlightLines(i.line.lineHorizon2,a),i.highlightLines(i.line.lineVertical2,a),i.highlightLines(i.matrixLabelChildRow2,a),i.highlightLine(i.matrixLabelParentRow2,t)},highlightCol2:function(t){var i=this;i.highlightMatrixCol(i.matrixRects2.rects,t),i.highlightLine(i.matrixLabelChildCol2,t),i.highlightLine(i.matrixLabelParentCol2,i.childMapParentCol(t,2)),i.highlightLine(i.bar.colBars2,t),i.highlightLine(i.bar.winBars2,t)},highlightParentCol2:function(t){var i=this,a=i.parentMapChildCol(t);i.highlightMatrixCols(i.matrixRects2.rects,a),i.highlightLines(i.matrixLabelChildCol2,a),i.highlightLine(i.matrix),i.highlightLines(i.bar.colBars2,a),i.highlightLines(i.bar.winBars2,a)},highlightMatrix1:function(t,i){var a=this;if(a.bar.rowBars1){var r=a.bar.rowBars1.length;a.highlightLine(a.bar.rowBars1,r-1-t),a.highlightLine(a.line.lineHorizon1,r-1-t),a.highlightLine(a.line.lineVertical1,t),a.highlightLine(a.matrixLabelChildRow1,t),a.highlightLine(a.matrixLabelParentRow1,a.childMapParentRow(t,1)),a.highlightMatrixSingle(a.matrixRects1.rects,t,i),a.highlightMatrixRow(a.matrixRects2.rects,i),a.highlightLine(a.bar.colBars1,i),a.highlightLine(a.bar.winBars1,i),a.highlightLine(a.line.lineHorizon2,i),a.highlightLine(a.line.lineVertical2,i),a.highlightLine(a.matrixLabelChildRow2,i),a.highlightLine(a.matrixLabelParentRow2,a.childMapParentRow(i,2))}},highlightMatrix2:function(t,i){var a=this;a.highlightMatrixCol(a.matrixRects1.rects,t),a.highlightLine(a.bar.colBars1,t),a.highlightLine(a.bar.winBars1,t),a.highlightLine(a.line.lineHorizon2,t),a.highlightLine(a.line.lineVertical2,t),a.highlightLine(a.matrixLabelChildRow2,t),a.highlightLine(a.matrixLabelParentRow2,a.childMapParentRow(t,2)),a.highlightMatrixSingle(a.matrixRects2.rects,t,i),a.highlightLine(a.matrixLabelChildCol2,i),a.highlightLine(a.matrixLabelParentCol2,a.childMapParentCol(i,2)),a.highlightLine(a.bar.colBars2,i),a.highlightLine(a.bar.winBars2,i)},childMapParentRow:function(t,i){return 1===this.strokeFrom&&1===i?0:t<3?0:t<6?1:t<9?2:t<15?3:4},childMapParentCol:function(t){return t<3?0:t<9?1:t<12?2:t<15?3:4},parentMapChildRow:function(t,i){if(1===this.strokeFrom&&1===i)return[0,1,2,3,4,5,6,7,8];switch(t){case 0:return[0,1,2];case 1:return[3,4,5];case 2:return[6,7,8];case 3:return[9,10,11,12,13,14];case 4:return[15,16,17]}},parentMapChildCol:function(t){switch(t){case 0:return[0,1,2];case 1:return[3,4,5,6,7,8];case 2:return[9,10,11];case 3:return[12,13,14];case 4:return[15,16,17]}},highlightLine:function(t,i){t&&t.length&&t.forEach(function(t,a){t.isHighlight=a===i})},highlightLines:function(t,i){t&&t.length&&t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})},highlightMatrixRow:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,r){t.isHighlight=a===i})})},highlightMatrixRows:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,r){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixCol:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){t.isHighlight=a===i})})},highlightMatrixCols:function(t,i){t&&t.length&&t.forEach(function(t,a){t.forEach(function(t,a){i.indexOf(a)>-1?t.isHighlight=!0:t.isHighlight=!1})})},highlightMatrixSingle:function(t,i,a){t&&t.length&&t.forEach(function(t,r){t.forEach(function(t,e){t.isHighlight=r===i||e===a})})},recoverLine:function(t){t&&t.length&&t.forEach(function(t){t.isHighlight=!1})},recoverMatrix:function(t){t&&t.length&&t.forEach(function(t){t.forEach(function(t){t.isHighlight=!1})})},recoverAll:function(){var t=this;t.recoverLine(t.bar.rowBars1),t.recoverLine(t.bar.colBars1),t.recoverLine(t.bar.colBars2),t.recoverLine(t.bar.winBars1),t.recoverLine(t.bar.winBars2),t.recoverLine(t.matrixLabelChildRow1),t.recoverLine(t.matrixLabelChildRow2),t.recoverLine(t.matrixLabelChildCol2),t.recoverLine(t.matrixLabelParentRow1),t.recoverLine(t.matrixLabelParentRow2),t.recoverLine(t.matrixLabelParentCol2),t.recoverLine(t.line.lineHorizon1),t.recoverLine(t.line.lineVertical1),t.recoverLine(t.line.lineHorizon2),t.recoverLine(t.line.lineVertical2),t.recoverMatrix(t.matrixRects1.rects),t.recoverMatrix(t.matrixRects2.rects)},calcStateMatrix:function(t){var i=this;if(!(t>=i.allMarkovStateOri.length-1)){var a=i.allMarkovStateOri[t],r=i.allMarkovStateOri[t+1],e=i.allMarkovStateShift[t],o=i.allMarkovStateShift[t+1],s=i.allMarkovStateShiftAccum[t],l=s.calcNextMarkovState(i.transMatrix),h=a.calcNextWinState(i.transMatrix)[1],n=r.calcNextWinState(i.transMatrix)[0],c=void 0,d=void 0,p=void 0,u=void 0;i.allMarkovStateShift.length>0&&(c=e.calcNextWinState(i.transMatrix)[1],d=o.calcNextWinState(i.transMatrix)[0],p=s.calcNextWinState(i.transMatrix)[1],u=l.calcNextWinState(i.transMatrix)[0]),0===t?(i.stateMatrixArray[0]=new M(a,e,s,0,i.StateID_index),i.stateMatrixArray[1]=new _(r,o,l,1,i.StateID_index),i.winStateArray[0]=new M(h,c,p,0,i.StateID_index),i.winStateArray[1]=new _(n,d,u,1,i.StateID_index)):(i.stateMatrixArray[0]=new _(a,e,s,0,i.StateID_index),i.stateMatrixArray[1]=new _(r,o,l,1,i.StateID_index),i.winStateArray[0]=new _(h,c,p,0,i.StateID_index),i.winStateArray[1]=new _(n,d,u,1,i.StateID_index))}}}}),H={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"view",attrs:{id:"matrixdetail-view"}},[a("svg",{attrs:{width:t.draw.width,height:t.draw.height}},[a("defs",[a("pattern",{attrs:{id:"stripe",width:"1",height:"0.1"}},[a("path",{attrs:{d:"M 0 0 L 100 0",stroke:"white","stroke-width":"1"}})])]),t._v(" "),a("g",{attrs:{transform:"translate("+t.draw.padding+", "+t.draw.padding+")"}},[a("g",{attrs:{id:"statematrix1"}},[a("g",{attrs:{id:"statematrix1-rowbar",transform:"translate(2, 0)"}},[t._l(t.bar.rowBars1,function(i,r){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverRowBars1(i,r,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveRowBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),t._v(" "),a("line",{staticClass:"barbase",attrs:{x1:"-2",y1:"0",x2:"-2",y2:t.bar.rowBar1BaseY}})],2),t._v(" "),a("g",{attrs:{id:"statematrix1-line-hori"}},t._l(t.line.lineHorizon1,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})})),t._v(" "),a("g",{attrs:{id:"statematrix1-line-ver",transform:"translate("+(t.draw.barArea+t.transformXserve)+", "+t.MatrixHeight+")"}},t._l(t.line.lineVertical1,function(i,r){return a("line",{key:r,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:i.x,x2:i.x,y1:t.draw.slotWidth,y2:-i.y-t.MatrixAdjust}})})),t._v(" "),a("g",{attrs:{id:"statematrix1-matrix",transform:"translate("+(t.draw.barArea+t.transformXserve)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},[t._l(t.matrixRects1.rects,function(i,r){return t.rectWidth>0?a("g",{key:"rect-row"+r,staticClass:"rectRow"},t._l(i,function(i,e){return a("rect",{key:i.id,staticClass:"rect",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:t.rectWidth,height:t.rectWidth},on:{mouseover:function(a){t.mouseoverMatrix1(i,r,e)},mouseleave:t.mouseleaveMatrix1}})})):t._e()}),t._v(" "),t._l(t.matrix.circles1,function(i,r){return a("g",{key:"circle-row"+r,staticClass:"circleRow"},t._l(i,function(t){return a("g",{key:t.id,staticClass:"circle"},[t.isNeg?[a("circle",{staticClass:"Dis neg",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]:[a("circle",{staticClass:"Dis",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]],2)}))}),t._v(" "),t._l(t.matrixLabelParentRow1,function(i,r){return t.rectWidth>0?a("g",{key:"label-group"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){t.highlightParentRow1(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:-50,width:i.width,height:20,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:-40}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),t._v(" "),t._l(t.matrixLabelChildRow1,function(i,r){return t.rectWidth>0?a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},on:{mouseover:function(i){t.highlightRow1(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:-25,width:i.width,height:20,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:-15}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),t._v(" "),t._l(t.matrixSymbol1,function(i,r){return a("text",{key:"symbol"+r,staticClass:"symbol",attrs:{x:i.x,y:i.y}},[t._v("\n            "+t._s(i.text)+"\n          ")])})],2),t._v(" "),a("g",{attrs:{id:"statematrix1-colbar-win",transform:"translate("+(1.7*t.draw.barArea+t.MatrixWidth)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},[t._l(t.bar.winBars1,function(i,r){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverWinBars1(i,r,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveWinBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:-i.widthDis,y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),t._v(" "),a("line",{staticClass:"barbase",attrs:{x1:"2",y1:"0",x2:"2",y2:t.bar.colBar1BaseY}})],2),t._v(" "),a("g",{attrs:{id:"statematrix1-colbar",transform:"translate("+(1.7*t.draw.barArea+t.MatrixWidth+4)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},t._l(t.bar.colBars1,function(i,r){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverProBars1(i,r,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveProBars1}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])})),t._v(" "),a("g",{attrs:{id:"statematrix2-line-hori",transform:"translate("+(1.8*t.draw.barArea+t.MatrixWidth)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},t._l(t.line.lineHorizon2,function(t,i){return a("line",{key:i,staticClass:"line",class:{highlight:t.isHighlight},attrs:{x1:t.x1,x2:t.x2,y1:t.y,y2:t.y}})}))]),t._v(" "),a("g",{attrs:{id:"statematrix2"}},[a("g",{attrs:{id:"statematrix2-line-ver",transform:"translate("+(3*t.draw.barArea+t.MatrixWidth)+", "+t.MatrixHeight+")"}},t._l(t.line.lineVertical2,function(i,r){return a("line",{key:r,staticClass:"line",class:{highlight:i.isHighlight},attrs:{x1:i.x,x2:i.x,y1:-t.MatrixAdjust,y2:i.y+t.draw.slotWidth}})})),t._v(" "),a("g",{attrs:{id:"statematrix2-matrix",transform:"translate("+(3*t.draw.barArea+t.MatrixWidth)+", 0)"}},[t._l(t.matrixRects2.rects,function(i,r){return t.rectWidth>0?a("g",{key:"rect-row"+r,staticClass:"rectRow"},t._l(i,function(i,e){return a("rect",{key:i.id,staticClass:"rect",class:{highlight:i.isHighlight},attrs:{x:i.x,y:i.y,width:t.rectWidth,height:t.rectWidth},on:{mouseover:function(a){t.mouseoverMatrix2(i,r,e)},mouseleave:t.mouseleaveMatrix2}})})):t._e()}),t._v(" "),t._l(t.matrix.circles2,function(i,r){return"pro"===t.nowMode?a("g",{key:"circle-row"+r,staticClass:"circleRow"},t._l(i,function(t){return a("g",{key:t.id,staticClass:"circle"},[t.isNeg?[a("circle",{staticClass:"Dis neg",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]:[a("circle",{staticClass:"Dis",attrs:{cx:t.cx,cy:t.cy,r:t.rDis}})]],2)})):t._e()}),t._v(" "),t._l(t.matrix.winRects2,function(i,r){return"win"===t.nowMode?a("g",{key:"winrect-row"+r},t._l(i,function(i){return a("g",{key:i.id,staticClass:"winrect"},[a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:i.x+t.rectWidth/2-i.widthDis/2,y:i.y+t.rectWidth/2-i.widthDis/2,width:i.widthDis,height:i.widthDis}})])})):t._e()}),t._v(" "),t._l(t.matrixLabelParentRow2,function(i,r){return t.rectWidth>0?a("g",{key:"label-group"+r,staticClass:"label",class:{highlight:i.isHighlight},attrs:{transform:"translate(0, "+t.MatrixHeightReal+")"},on:{mouseover:function(i){t.highlightParentRow2(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:30,width:i.width,height:20,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:40}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()}),t._v(" "),t._l(t.matrixLabelChildRow2,function(i,r){return t.rectWidth>0?a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},attrs:{transform:"translate(0, "+t.MatrixHeightReal+")"},on:{mouseover:function(i){t.highlightCol1(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:i.x,y:5,width:i.width,height:20,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:i.x+i.width/2,y:15}},[t._v("\n              "+t._s(i.text)+"\n            ")])]):t._e()})],2),t._v(" "),t._l(t.matrixSymbol2,function(i,r){return a("text",{key:"symbol"+r,staticClass:"symbol",attrs:{x:i.x,y:i.y,transform:"translate("+(3*t.draw.barArea+t.MatrixWidth)+", 0)"}},[t._v("\n          "+t._s(i.text)+"\n        ")])}),t._v(" "),a("g",{attrs:{id:"statematrix2-colbar-win",transform:"translate("+(3.8*t.draw.barArea+2*t.MatrixWidth)+", 0)"}},[t._l(t.bar.winBars2,function(i,r){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverWinBars2(i,r,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveWinBars2}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:-i.widthDis,y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])}),t._v(" "),a("line",{staticClass:"barbase",attrs:{x1:"2",y1:"0",x2:"2",y2:t.bar.colBar2BaseY}})],2),t._v(" "),a("g",{attrs:{id:"statematrix2-colbar",transform:"translate("+(3.8*t.draw.barArea+2*t.MatrixWidth+4)+", 0)"}},t._l(t.bar.colBars2,function(i,r){return a("g",{key:i.id,staticClass:"bar",class:{highlight:i.isHighlight},on:{mouseover:function(a){t.mouseoverProBars2(i,r,100*i.proOri,100*i.proDis)},mouseleave:t.mouseleaveProBars2}},[0!==i.proDis?a("rect",{staticClass:"Dis",class:{neg:i.isNeg},attrs:{x:"0",y:i.y,width:i.widthDis,height:t.barWidth}}):t._e()])})),t._v(" "),null!==t.bar.winBars2?a("g",{staticClass:"mode",class:{choose:t.winMode.choose},attrs:{id:"win-mode",transform:"translate("+(3.8*t.draw.barArea+2*t.MatrixWidth)+", 0)"},on:{click:function(i){t.setMode("win")}}},[a("g",{attrs:{transform:"translate(-16, "+(t.MatrixHeightReal+5)+")"}},[a("icon",{attrs:{name:"eye",scale:"1"}})],1),t._v(" "),a("path",{staticClass:"choose-border",attrs:{d:"M 2 0 L -15 0 L -15 "+t.bar.colBar2BaseY+" L 2 "+t.bar.colBar2BaseY}})]):t._e(),t._v(" "),null!==t.bar.colBars2?a("g",{staticClass:"mode",class:{choose:t.proMode.choose},attrs:{id:"pro-mode",transform:"translate("+(3.8*t.draw.barArea+2*t.MatrixWidth)+", 0)"},on:{click:function(i){t.setMode("pro")}}},[a("g",{attrs:{transform:"translate(4, "+(t.MatrixHeightReal+5)+")"}},[a("icon",{attrs:{name:"eye",scale:"1"}})],1),t._v(" "),a("path",{staticClass:"choose-border",attrs:{d:"M 2 0 L 32 0 L 32 "+t.bar.colBar2BaseY+" L 2 "+t.bar.colBar2BaseY}})]):t._e(),t._v(" "),t._l(t.matrixLabelChildCol2,function(i,r){return t.rectWidth>0?a("g",{key:"label"+r,staticClass:"label",class:{highlight:i.isHighlight},attrs:{transform:"translate("+(5*t.draw.barArea+2*t.MatrixWidth)+", 0)"},on:{mouseover:function(i){t.highlightCol2(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:0,y:i.y,width:30,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{x:15,y:i.y+i.height/2}},[t._v("\n            "+t._s(i.text)+"\n          ")])]):t._e()}),t._v(" "),t._l(t.matrixLabelParentCol2,function(i,r){return t.rectWidth>0?a("g",{key:"label-group"+r,staticClass:"label",class:{highlight:i.isHighlight},attrs:{transform:"translate("+(5*t.draw.barArea+2*t.MatrixWidth)+", 0)"},on:{mouseover:function(i){t.highlightParentCol2(r)},mouseleave:t.recoverAll}},[a("rect",{attrs:{x:35,y:i.y,width:t.rectWidth,height:i.height,rx:5,ry:5}}),t._v(" "),a("text",{attrs:{transform:"translate("+(35+t.rectWidth/2)+", "+(i.y+i.height/2)+") rotate(90)",x:0,y:0}},[t._v("\n            "+t._s(i.text)+"\n          ")])]):t._e()})],2),t._v(" "),a("g",{staticClass:"strokeNum",attrs:{transform:"translate(-2, "+t.MatrixHeight+")"}},[a("rect",{staticClass:"player0",attrs:{x:"0",y:"0",width:"30",height:"30"}}),t._v(" "),a("text",{attrs:{x:"15",y:"15"}},[t._v(t._s(t.strokeFrom))])]),t._v(" "),a("g",{staticClass:"strokeNum",attrs:{transform:"translate("+(1.3*t.draw.barArea+t.MatrixWidth)+", "+t.MatrixHeight+")"}},[a("rect",{staticClass:"player1",attrs:{x:"0",y:"0",width:"30",height:"30"}}),t._v(" "),a("text",{attrs:{x:"15",y:"15"}},[t._v(t._s(t.strokeFrom+1))])]),t._v(" "),a("g",{staticClass:"strokeNum",attrs:{transform:"translate("+(5.3*t.draw.barArea+2*t.MatrixWidth)+", "+t.MatrixHeight+")"}},[a("rect",{staticClass:"player0",attrs:{x:"0",y:"0",width:"30",height:"30"}}),t._v(" "),a("text",{attrs:{x:"15",y:"15"}},[t._v(t._s(t.strokeFrom+2))])]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-0"}},[t.tooltip.barProRight0.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-0",transform:"translate("+t.tooltip.barProRight0.x+", "+t.tooltip.barProRight0.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 -30"}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barProRightBottom0.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-bottom-0",transform:"translate("+t.tooltip.barProRightBottom0.x+", "+t.tooltip.barProRightBottom0.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-12,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:11}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 18 L 118 18 L 148 -12"}}),t._v(" "),a("text",{attrs:{x:18,y:37}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 18) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-matrix1",transform:"translate("+(t.draw.barArea+t.transformXserve)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},[t.tooltip.matrixBottom1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom-1",transform:"translate("+t.tooltip.matrixBottom1.x+", "+t.tooltip.matrixBottom1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:31}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 38 L 20 38 L 50 8"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:57}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, 38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixTop1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-top-1",transform:"translate("+t.tooltip.matrixTop1.x+", "+t.tooltip.matrixTop1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height-8+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 -38 L 20 -38 L 50 -68"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height-8+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{translate:"transform(60, -38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixRight1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-right-1",transform:"translate("+t.tooltip.matrixRight1.x+", "+t.tooltip.matrixRight1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 -30"}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixRightTop1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-right-top-1",transform:"translate("+t.tooltip.matrixRightTop1.x+", "+t.tooltip.matrixRightTop1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:12-t.tooltip.height,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:12-t.tooltip.height+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 -18 L 118 -18 L 148 -48"}}),t._v(" "),a("text",{attrs:{x:18,y:12-t.tooltip.height+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, -18) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixRightBottom1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-right-bottom-1",transform:"translate("+t.tooltip.matrixRightBottom1.x+", "+t.tooltip.matrixRightBottom1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-12,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:11}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 18 L 118 18 L 148 -12"}}),t._v(" "),a("text",{attrs:{x:18,y:37}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 18) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-winbar-1",transform:"translate("+(1.7*t.draw.barArea+t.MatrixWidth)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},[t.tooltip.barWinLeft1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-1",transform:"translate("+t.tooltip.barWinLeft1.x+", "+t.tooltip.barWinLeft1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 -30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barWinLeftTop1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-top-1",transform:"translate("+t.tooltip.barWinLeftTop1.x+", "+t.tooltip.barWinLeftTop1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:8-t.tooltip.height,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 -22 L -78 -22 L -48 -52"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, -22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barWinLeftBottom1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-bottom-1",transform:"translate("+t.tooltip.barWinLeftBottom1.x+", "+t.tooltip.barWinLeftBottom1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:15}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 22 L -78 22 L -48 -8"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:41}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-1",transform:"translate("+(1.8*t.draw.barArea+t.MatrixWidth)+", "+(t.draw.slotWidth+t.MatrixHeight)+")"}},[t.tooltip.barProRight1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-1",transform:"translate("+t.tooltip.barProRight1.x+", "+t.tooltip.barProRight1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 0 L 118 0 L 148 -30"}}),t._v(" "),a("text",{attrs:{x:18,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -8 L 10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barProRightTop1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-top-1",transform:"translate("+t.tooltip.barProRightTop1.x+", "+t.tooltip.barProRightTop1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:8-t.tooltip.height,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:8-t.tooltip.height+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 -22 L 118 -22 L 148 -52"}}),t._v(" "),a("text",{attrs:{x:18,y:8-t.tooltip.height+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, -22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -6 L 10 6 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barProRightBottom1.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-right-bottom-1",transform:"translate("+t.tooltip.barProRightBottom1.x+", "+t.tooltip.barProRightBottom1.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:8,y:-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:18,y:15}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M 18 22 L 118 22 L 148 -8"}}),t._v(" "),a("text",{attrs:{x:18,y:41}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(158, 22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M 10 -6 L 10 6 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-matrix2",transform:"translate("+(3*t.draw.barArea+t.MatrixWidth)+", 0)"}},[t.tooltip.matrixTop2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-top-2",transform:"translate("+t.tooltip.matrixTop2.x+", "+t.tooltip.matrixTop2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:-t.tooltip.height-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height-8+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 -38 L 20 -38 L 50 -68"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:-t.tooltip.height-8+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, -38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 -10 L 8 -10 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.matrixBottom2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-matrix-bottom-2",transform:"translate("+t.tooltip.matrixBottom2.x+", "+t.tooltip.matrixBottom2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-t.tooltip.width/2,y:8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:31}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -80 38 L 20 38 L 50 8"}}),t._v(" "),a("text",{attrs:{x:-t.tooltip.width/2+10,y:57}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(60, 38) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -8 10 L 8 10 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-winbar-2",transform:"translate("+(3.7*t.draw.barArea+2*t.MatrixWidth)+", 0)"}},[t.tooltip.barWinLeft2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-2",transform:"translate("+t.tooltip.barWinLeft2.x+", "+t.tooltip.barWinLeft2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 -30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barWinLeftTop2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-top-2",transform:"translate("+t.tooltip.barWinLeftTop2.x+", "+t.tooltip.barWinLeftTop2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:8-t.tooltip.height,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 -22 L -78 -22 L -48 -52"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, -22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barWinLeftBottom2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-winbar-left-bottom-2",transform:"translate("+t.tooltip.barWinLeftBottom2.x+", "+t.tooltip.barWinLeftBottom2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:15}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 22 L -78 22 L -48 -8"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:41}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e()]),t._v(" "),a("g",{attrs:{id:"tooltip-probar-2",transform:"translate("+(3.8*t.draw.barArea+2*t.MatrixWidth)+", 0)"}},[t.tooltip.barProLeft2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-left-2",transform:"translate("+t.tooltip.barProLeft2.x+", "+t.tooltip.barProLeft2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-t.tooltip.height/2,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 0 L -78 0 L -48 -30"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:-t.tooltip.height/2+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 0) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -8 L -10 8 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barProLeftTop2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-left-top-2",transform:"translate("+t.tooltip.barProLeftTop2.x+", "+t.tooltip.barProLeftTop2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:8-t.tooltip.height,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+23}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 -22 L -78 -22 L -48 -52"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:8-t.tooltip.height+49}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, -22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e(),t._v(" "),t.tooltip.barProLeftBottom2.show?a("g",{staticClass:"tooltip",attrs:{id:"tooltip-probar-left-bottom-2",transform:"translate("+t.tooltip.barProLeftBottom2.x+", "+t.tooltip.barProLeftBottom2.y+")"}},[a("rect",{attrs:{rx:"5",ry:"5",x:-8-t.tooltip.width,y:-8,width:t.tooltip.width,height:t.tooltip.height}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:15}},[t._v("\n            Ori: "+t._s(t.tooltip.ori)+"%\n          ")]),t._v(" "),a("path",{staticClass:"split",attrs:{d:"M -178 22 L -78 22 L -48 -8"}}),t._v(" "),a("text",{attrs:{x:-8-t.tooltip.width+10,y:41}},[t._v("\n            Diff: "+t._s(t.tooltip.dif)+"%\n          ")]),t._v(" "),a("g",{staticClass:"pie",attrs:{transform:"translate(-38, 22) rotate(45)"}},[a("circle",{class:{neg:t.tooltip.isNeg},attrs:{cx:"0",cy:"0",r:"25"}}),t._v(" "),a("path",{staticClass:"now",attrs:{d:t.tooltip.pieNow,stroke:"white","stroke-width":"2"}}),t._v(" "),a("path",{staticClass:"accum",attrs:{d:t.tooltip.pieAccum,stroke:"white","stroke-width":"2"}})]),t._v(" "),a("path",{attrs:{d:"M -10 -6 L -10 6 L 0 0 z"}})]):t._e()])])])])},staticRenderFns:[]};var E={name:"MarkovStateCtl",components:{MatrixOverview:B,MatrixDetail:a("VU/8")(N,H,!1,function(t){a("5xLA")},null,null).exports},props:["shift","transMatrix","dim","state0Prop","stateArray","allMarkovStateOri","StateID_index","Index_StateID","K","B","start","strokeFromApp","chooseName"],data:function(){return{strokeSet:!1,strokeFromSet:null}},computed:{allMarkovStateShift:function(){if(-1!==this.shift.stateID){var t=[],i=[];return this.calcMarkovStateShift(t,i,this.start,this.shift),console.log("change MarkovStateShift"),{shift:t,accum:i}}},strokeFromReal:function(){return this.strokeSet?this.strokeFromSet:this.strokeFromApp}},watch:{start:function(){this.strokeFromSet=null,this.strokeSet=!1},chooseName:function(){this.strokeFromSet=null,this.strokeSet=!1}},methods:{onSetStroke:function(t){this.strokeFromSet=t,this.strokeSet=!0},calcMarkovStateShift:function(t,i,a,r){var e=this,o=r.stateID,s=r.type;if("single"===s){if(o<198&&!a){var l=new b(e.state0Prop,e.stateArray),h=l.shiftPro(o,e.StateID_index,e.K,e.B);t.push(h),i.push(l);var n=1,c=h,d=void 0;do{c=(d=c).calcNextMarkovState(e.transMatrix),i.push(c),t.push(c),n++}while((Math.abs(d.proArray[e.dim-2]-c.proArray[e.dim-2])>1e-5||Math.abs(d.proArray[e.dim-1]-c.proArray[e.dim-1])>1e-5||0===d.proArray[e.dim-1]||0===d.proArray[e.dim-2])&&n<35)}else if(o<486&&o>=198){var p=new b(e.state0Prop,e.stateArray);t.push(p),i.push(p);var u=1,g=p,x=void 0;do{g=(x=g).calcNextMarkovState(e.transMatrix),i.push(g),u%2===a&&(g=g.shiftPro(o,e.StateID_index,e.K,e.B)),t.push(g),u++}while((Math.abs(x.proArray[e.dim-2]-g.proArray[e.dim-2])>1e-5||Math.abs(x.proArray[e.dim-1]-g.proArray[e.dim-1])>1e-5||0===x.proArray[e.dim-1]||0===x.proArray[e.dim-2])&&u<35)}}else if("group"===s)if(o<198&&!a){var f=new b(e.state0Prop,e.stateArray),w=f.shiftProGroup(o,e.StateID_index,e.K,e.B);i.push(f),t.push(w);var m=1,v=w,y=void 0;do{v=(y=v).calcNextMarkovState(e.transMatrix),i.push(v),t.push(v),m++}while((Math.abs(y.proArray[e.dim-2]-v.proArray[e.dim-2])>1e-5||Math.abs(y.proArray[e.dim-1]-v.proArray[e.dim-1])>1e-5||0===y.proArray[e.dim-1]||0===y.proArray[e.dim-2])&&m<35)}else if(o<486&&o>=198){var _=new b(e.state0Prop,e.stateArray);i.push(_),t.push(_);var M=1,k=_,S=void 0;do{k=(S=k).calcNextMarkovState(e.transMatrix),i.push(k),M%2===a&&(k=k.shiftProGroup(o,e.StateID_index,e.K,e.B)),t.push(k),M++}while((Math.abs(S.proArray[e.dim-2]-k.proArray[e.dim-2])>1e-5||Math.abs(S.proArray[e.dim-1]-k.proArray[e.dim-1])>1e-5||0===S.proArray[e.dim-1]||0===S.proArray[e.dim-2])&&M<35)}}}},I={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"markovstate-container"}},[a("MatrixOverview",{attrs:{transMatrix:t.transMatrix,dim:t.dim,allMarkovStateOri:t.allMarkovStateOri,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,start:t.start,allMarkovStateShift:t.allMarkovStateShift.shift,allMarkovStateShiftAccum:t.allMarkovStateShift.accum,strokeFrom:t.strokeFromReal},on:{setStroke:t.onSetStroke}}),t._v(" "),a("MatrixDetail",{attrs:{transMatrix:t.transMatrix,allMarkovStateOri:t.allMarkovStateOri,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,strokeFrom:t.strokeFromReal,allMarkovStateShift:t.allMarkovStateShift.shift,allMarkovStateShiftAccum:t.allMarkovStateShift.accum,shift:t.shift,K:t.K,B:t.B}})],1)},staticRenderFns:[]};var O=a("VU/8")(E,I,!1,function(t){a("kn2M")},null,null).exports,F=a("aozt"),z=a.n(F),Y={name:"App",components:{Players:l,WinDisMatrix:W,MarkovStateCtl:O},data:function(){return{K:.05,B:.25,start:0,playerWinDis:null,chooseName:null,nowPlayerset:null,state0Count:new Array(488).fill(0),state0Prop:null,transMatrix:new w,allMarkovState:null,stateArray:[],dim:null,StateID_index:{},Index_StateID:{},shift:{shiftStateID:null,type:null}}},mounted:function(){var t=this;z.a.get("./static/datasets/playersServe.json").then(function(i){t.playerWinDis=i.data})},computed:{strokeFrom:function(){return this.start+1},state0PropNow:function(){if(this.state0Prop)return this.state0Prop[this.start]},allMarkovStateNow:function(){if(this.allMarkovState)return this.allMarkovState[this.start]},endState:function(){if(this.allMarkovStateNow)return this.allMarkovStateNow[this.allMarkovStateNow.length-1]}},methods:{onChooseFile:function(t){var i=t[0];this.chooseName=i,this.readFile(i),this.shift.shiftStateID=null,this.shift.type=null},onSetShift:function(t){this.shift.shiftStateID=t[0],this.shift.type=t[1]},onSetStart:function(t){var i=this;i.shift.shiftStateID=null,i.shift.type=null,0===t?z.a.get("./static/datasets/playersServe.json").then(function(a){i.playerWinDis=a.data,i.start=t}):z.a.get("./static/datasets/playersReceive.json").then(function(a){i.playerWinDis=a.data,i.start=t})},readFile:function(t){var i=this;console.log("----readFile----"),console.log(t),z.a.get("./static/datasets/"+t+".json").then(function(t){var a=t.data;i.nowPlayerset={strikes:a}}).then(function(){i.calcTransMatrix(),console.log(i.transMatrix),i.calcState0Prop(i.state0Count,i.transMatrix.keepRow),i.calcMarkovState(i.state0Prop,i.transMatrix)}).catch(function(t){console.log(t)})},calcTransMatrix:function(){var t=this;t.transMatrix=new w,t.state0Count=new Array(488).fill(0),t.state0Prop=null;var i=t.nowPlayerset.strikes,a=i.length;i.forEach(function(r,e){if(e+1<a){var o=r,s=i[e+1];if(s.index-o.index==1){var l=new m(o,s);if(0===o.strikeTech&&-1!==l.id&&(t.state0Count[l.id]++,-1!==s.win&&(t.transMatrix.accumCountMatrix(l.id,486+s.win),l.id%2===s.win&&console.error("serve"))),e+2<a){var h=i[e+2];if(h.index-s.index==1&&-1===o.win&&-1===s.win&&0!==s.strikeTech&&0!==h.strikeTech){var n=new m(s,h);-1!==l.id&&-1!==n.id?(t.transMatrix.accumCountMatrix(l.id,n.id),-1!==h.win&&t.transMatrix.accumCountMatrix(n.id,486+h.win)):-1!==l.id&&-1!==h.win&&l.id%2!==h.win&&t.transMatrix.accumCountMatrix(l.id,486+h.win)}}}}}),t.transMatrix.calcProMatrix()},calcState0Prop:function(t,i){var a=this;a.stateArray=[],a.dim=null,a.StateID_index={},a.Index_StateID={};var r=[];i.forEach(function(i,e){r.push(t[i]),a.StateID_index[i]=e,a.Index_StateID[e]=i,a.stateArray.push(new v(i))}),a.dim=a.stateArray.length,a.state0Prop=a.calcProState(r),console.log(a.state0Prop)},calcMarkovState:function(t,i){var a=this,r=new b(t[0],a.stateArray),e=new b(t[1],a.stateArray),o=a.MarkovProcessing(r,i),s=a.MarkovProcessing(e,i);console.log("allMarkovStateServe: "),console.log(o[o.length-1].proArray[a.dim-1]),console.log(o[o.length-1].proArray[a.dim-2]),console.log("allMarkovStateReceive: "),console.log(s[s.length-1].proArray[a.dim-1]),console.log(s[s.length-1].proArray[a.dim-2]),a.allMarkovState=[o,s]},calcProState:function(t){var i=this,a=[],r=[],e=0,o=0;if(t.forEach(function(t,s){i.Index_StateID[s]%2?(a.push(0),e+=0,r.push(t),o+=t):(a.push(t),e+=t,r.push(0),o+=0)}),0!==e&&0!==o){var s=[],l=[];return a.forEach(function(t){s.push(t/e)}),r.forEach(function(t){l.push(t/o)}),[s,l]}console.error("sum = 0 in state0Count")},MarkovProcessing:function(t,i){var a=this,r=0,e=[];e.push(t);var o=t,s=void 0;do{o=(s=o).calcNextMarkovState(i),e.push(o),r++}while((Math.abs(s.proArray[a.dim-2]-o.proArray[a.dim-2])>1e-5||Math.abs(s.proArray[a.dim-1]-o.proArray[a.dim-1])>1e-5||0===s.proArray[a.dim-2]||0===s.proArray[a.dim-1])&&r<35);return e}}},V={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"main"}},[a("div",{attrs:{id:"players-container"}},[a("Players",{attrs:{playerWinDis:t.playerWinDis},on:{chooseFile:t.onChooseFile,setStart:t.onSetStart}}),t._v(" "),a("WinDisMatrix",{attrs:{transMatrix:t.transMatrix,playerSet:t.nowPlayerset,state0Prop:t.state0PropNow,endState:t.endState,dim:t.dim,stateArray:t.stateArray,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,K:t.K,B:t.B,start:t.start,playerWinDis:t.playerWinDis,chooseName:t.chooseName},on:{setShift:t.onSetShift}})],1),t._v(" "),a("MarkovStateCtl",{attrs:{shift:{stateID:t.shift.shiftStateID,type:t.shift.type},transMatrix:t.transMatrix,dim:t.dim,stateArray:t.stateArray,state0Prop:t.state0PropNow,allMarkovStateOri:t.allMarkovStateNow,StateID_index:t.StateID_index,Index_StateID:t.Index_StateID,K:t.K,B:t.B,start:t.start,strokeFromApp:t.strokeFrom,chooseName:t.chooseName}})],1)])},staticRenderFns:[]};var X=a("VU/8")(Y,V,!1,function(t){a("5ghp")},null,null).exports;r.a.config.productionTip=!1,new r.a({el:"#app",components:{App:X},template:"<App/>"})},Qzgt:function(t,i){},Rc2B:function(t,i){},T1jv:function(t,i){},kn2M:function(t,i){},rx7f:function(t,i){}},["NHnr"]);